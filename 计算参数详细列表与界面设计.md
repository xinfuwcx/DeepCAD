# ⚙️ 计算参数详细列表与界面设计

**DeepCAD计算模块 - 完整参数体系与界面示意图**

## 📋 计算参数完整清单

### 🟢 **基础计算参数** (用户必看)

```typescript
interface BasicComputationParams {
  // 1. 分析类型控制
  analysis_type: 'static' | 'dynamic' | 'seepage' | 'coupled';        // 分析类型 - 默认: static
  load_application: 'instantaneous' | 'staged' | 'time_dependent';    // 荷载施加方式 - 默认: staged
  
  // 2. 求解器基础设置
  solver_type: 'direct' | 'iterative';                               // 求解器类型 - 默认: direct
  max_iterations: number;                                             // 最大迭代次数 - 默认: 50
  
  // 3. 收敛控制
  convergence_tolerance: number;                                      // 收敛容差 - 默认: 1e-6
  residual_tolerance: number;                                         // 残差容差 - 默认: 1e-6
  
  // 4. 施工阶段控制
  construction_stages: number;                                        // 施工阶段数 - 默认: 自动根据开挖深度
  stage_duration: number;                                             // 每阶段持续时间 天 - 默认: 7
  
  // 5. 基础物理设置
  enable_gravity: boolean;                                            // 启用重力 - 默认: true
  gravity_acceleration: number;                                       // 重力加速度 m/s² - 默认: 9.81
  enable_initial_stress: boolean;                                     // 启用初始应力 - 默认: true
}
```

### 🟡 **高级计算参数** (折叠显示)

```typescript
interface AdvancedComputationParams {
  // 6. 非线性分析控制
  geometric_nonlinearity: boolean;                                    // 几何非线性 - 默认: true
  material_nonlinearity: boolean;                                     // 材料非线性 - 默认: false
  contact_nonlinearity: boolean;                                      // 接触非线性 - 默认: true
  
  // 7. 求解策略控制
  solution_strategy: 'newton_raphson' | 'modified_newton' | 'bfgs';   // 求解策略 - 默认: newton_raphson
  line_search_enabled: boolean;                                      // 线搜索 - 默认: true
  line_search_tolerance: number;                                      // 线搜索容差 - 默认: 0.8
  
  // 8. 时间步进控制
  time_stepping: 'fixed' | 'adaptive' | 'automatic';                 // 时间步进策略 - 默认: automatic
  initial_time_step: number;                                          // 初始时间步长 - 默认: 0.1
  max_time_step: number;                                              // 最大时间步长 - 默认: 1.0
  min_time_step: number;                                              // 最小时间步长 - 默认: 0.001
  
  // 9. 数值积分控制
  integration_scheme: 'gauss' | 'lobatto' | 'reduced';               // 积分方案 - 默认: gauss
  integration_points: 2 | 3 | 4;                                     // 积分点数 - 默认: 2
  
  // 10. 刚度矩阵控制
  stiffness_update_frequency: 'every_iteration' | 'every_step' | 'initial'; // 刚度更新频率 - 默认: every_iteration
  matrix_storage: 'full' | 'symmetric' | 'sparse';                   // 矩阵存储方式 - 默认: sparse
}
```

### 🔴 **专家计算参数** (专家模式)

```typescript
interface ExpertComputationParams {
  // 11. 高级求解器选项
  preconditioner_type: 'ilu' | 'jacobi' | 'ssor' | 'multigrid';      // 预条件子 - 默认: ilu
  solver_tolerance: number;                                           // 求解器容差 - 默认: 1e-9
  krylov_subspace_size: number;                                       // Krylov子空间大小 - 默认: 30
  
  // 12. 并行计算控制
  parallel_enabled: boolean;                                          // 启用并行计算 - 默认: true
  thread_count: number;                                               // 线程数 - 默认: 4
  domain_decomposition: 'metis' | 'scotch' | 'manual';              // 区域分解方法 - 默认: metis
  
  // 13. 内存和性能优化
  memory_optimization: boolean;                                       // 内存优化 - 默认: true
  out_of_core_solver: boolean;                                        // 核外求解器 - 默认: false
  cache_optimization: boolean;                                        // 缓存优化 - 默认: true
  
  // 14. 调试和监控选项
  verbose_output: boolean;                                            // 详细输出 - 默认: false
  convergence_monitoring: boolean;                                    // 收敛监控 - 默认: true
  residual_history_tracking: boolean;                                 // 残差历史跟踪 - 默认: false
  performance_profiling: boolean;                                     // 性能分析 - 默认: false
}
```

### 🎯 **深基坑专用参数** (工程特化)

```typescript
interface ExcavationSpecificParams {
  // 15. 开挖过程控制
  excavation_method: 'top_down' | 'bottom_up' | 'island' | 'mixed';   // 开挖方法 - 默认: top_down
  excavation_sequence: 'symmetric' | 'asymmetric' | 'staged';         // 开挖顺序 - 默认: symmetric
  excavation_rate: number;                                            // 开挖速率 m/day - 默认: 1.0
  
  // 16. 支护系统激活
  support_activation_timing: 'immediate' | 'delayed' | 'progressive'; // 支护激活时机 - 默认: immediate
  support_prestress: boolean;                                         // 支护预应力 - 默认: true
  support_stiffness_development: boolean;                             // 支护刚度发展 - 默认: true
  
  // 17. 地下水控制
  dewatering_enabled: boolean;                                        // 启用降水 - 默认: true
  seepage_coupling: boolean;                                          // 渗流耦合 - 默认: true
  water_table_drawdown_rate: number;                                  // 水位下降速率 m/day - 默认: 0.5
  
  // 18. 监测点设置
  displacement_monitoring_points: Array<{x: number, y: number, z: number}>; // 位移监测点
  stress_monitoring_points: Array<{x: number, y: number, z: number}>;       // 应力监测点
  pore_pressure_monitoring: boolean;                                  // 孔压监测 - 默认: true
}
```

---

## 🎨 计算参数设置界面示意图

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                          ⚙️ DeepCAD计算分析参数设置                                      │
│                             计算控制面板 + 实时监控显示                                    │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────┐  ┌─────────────────────────────────────────────────────────┐
│    🎛️ 计算参数控制面板      │  │                  📊 分析进度实时监控                    │
│                            │  │  ┌───────────────────────────────────────────────────┐ │
│ 🟢 基础参数 [已展开 ▼]      │  │  │           ⚙️ 当前计算状态监控                      │ │
│                            │  │  │                                                  │ │
│ 分析类型:                   │  │  │    📈 阶段: 第3阶段开挖分析                      │ │
│ ┌─────────────────────────┐ │  │  │    ⏱️ 进度: ████████░░ 80%                      │ │
│ │ [静力分析      ▼]      │ │  │  │    🔄 迭代: 15/50 (收敛中)                       │ │
│ │ ├─ 静力分析 (推荐)      │ │  │  │    📊 残差: 1.2e-5 (接近收敛)                    │ │
│ │ ├─ 动力分析            │ │  │  │                                                  │ │
│ │ ├─ 渗流分析            │ │  │  │    💾 内存: 2.1GB / 8GB                         │ │
│ │ ├─ 耦合分析            │ │  │  │    ⏲️ 剩余: 约12分钟                             │ │
│ │ └─ 智能推荐            │ │  │  └───────────────────────────────────────────────────┘ │
│ └─────────────────────────┘ │  │                                                        │
│                            │  │  🎯 快速操作:                                           │
│ 荷载施加:                   │  │  [⏸️ 暂停计算] [⏹️ 停止计算] [📊 详细日志]             │
│ [分阶段施加    ▼]          │  │  [💾 保存状态] [🔄 重新计算] [📈 收敛曲线]             │
│                            │  └─────────────────────────────────────────────────────────┘
│ 求解器类型:                 │
│ [直接求解器    ▼]          │
│                            │
│ 最大迭代次数:               │
│ [━━━━━●━━━━] 50             │
│                            │
│ 收敛容差:                   │
│ [1e-6      ] (工程精度)    │
│                            │
│ 施工阶段数:                 │
│ [━━━●━━━━━━] 8 阶段         │
│                            │
│ 每阶段持续:                 │
│ [━━━━●━━━━━] 7 天           │
│                            │
│ ☑️ 启用重力  ☑️ 初始应力     │
│ ☑️ 几何非线性 ☐ 材料非线性   │
│                            │
│ 🟡 高级参数 [点击展开 ▶]     │
│                            │
│ 🎯 深基坑专用 [已展开 ▼]     │
│                            │
│ 开挖方法:                   │
│ [自上而下    ▼]            │
│                            │
│ 开挖顺序:                   │
│ [对称开挖    ▼]            │
│                            │
│ ☑️ 启用降水  ☑️ 渗流耦合     │
│ ☑️ 支护预应力 ☑️ 刚度发展    │
│                            │
│ 🔴 专家参数 [专家模式 ▶]     │
│                            │
└─────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                          📊 计算收敛性监控与诊断                                          │
│ ┌─────────────────────────────────────┐ ┌─────────────────────────────────────────────┐ │
│ │        📈 收敛历史曲线               │ │            🎯 关键点监测                     │ │
│ │                                    │ │                                            │ │
│ │     残差变化 (对数尺度)              │ │ 📍 监测点位移 (mm):                         │ │
│ │ 1e-2 ┐                             │ │ 地连墙顶: -12.5  基坑底: -8.2              │ │
│ │      │╲                            │ │ 周边建筑: -3.1   道路中心: -2.8            │ │
│ │ 1e-4 │ ╲___                        │ │                                            │ │
│ │      │     ╲___                    │ │ 📊 应力状态:                                │ │
│ │ 1e-6 │         ╲___●收敛目标        │ │ 支护最大应力: 85% 安全                      │ │
│ │      └─────────────────────────────  │ │ 土体安全系数: 1.85 (良好)                   │ │
│ │      0   10   20   30   40   50    │ │                                            │ │
│ │            迭代次数                 │ │ 🌊 渗流状态:                                │ │
│ │                                    │ │ 降水水位: -8.5m (目标-8.0m)                │ │
│ │ [📊 详细曲线] [💾 导出数据]          │ │ 渗流稳定: 是   管涌风险: 低                 │ │
│ └─────────────────────────────────────┘ └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                          🟡 高级参数面板 (点击展开后显示)                                  │
│ ┌─────────────────────────────────────┐ ┌─────────────────────────────────────────────┐ │
│ │        🔧 非线性控制                 │ │            ⏱️ 时间步进控制                   │ │
│ │                                    │ │                                            │ │
│ │ ☑️ 几何非线性 (大变形)               │ │ 时间步进策略:                               │ │
│ │ ☐ 材料非线性 (塑性)                 │ │ [自动调整     ▼]                           │ │
│ │ ☑️ 接触非线性 (滑移)                │ │                                            │ │
│ │                                    │ │ 初始时间步: [0.1     ] 天                  │ │
│ │ 求解策略:                           │ │ 最大时间步: [1.0     ] 天                  │ │
│ │ [Newton-Raphson ▼]                 │ │ 最小时间步: [0.001   ] 天                  │ │
│ │                                    │ │                                            │ │
│ │ ☑️ 启用线搜索                       │ │ 数值积分:                                   │ │
│ │ 线搜索容差: [0.8     ]              │ │ [高斯积分     ▼] [2点   ▼]                │ │
│ └─────────────────────────────────────┘ └─────────────────────────────────────────────┘ │
│                                                                                         │
│ ┌─────────────────────────────────────┐ ┌─────────────────────────────────────────────┐ │
│ │        🏗️ 施工过程模拟               │ │            🌊 地下水控制                     │ │
│ │                                    │ │                                            │ │
│ │ 开挖方法: [自上而下   ▼]            │ │ ☑️ 启用降水分析                             │ │
│ │ 开挖速率: [1.0     ] m/天           │ │ ☑️ 渗流-应力耦合                           │ │
│ │                                    │ │                                            │ │
│ │ 支护激活:                           │ │ 水位下降速率: [0.5   ] m/天                │ │
│ │ [立即激活     ▼]                    │ │                                            │ │
│ │                                    │ │ 边界条件:                                   │ │
│ │ ☑️ 支护预应力                       │ │ ☑️ 基坑边界不透水                           │ │
│ │ ☑️ 刚度时变发展                     │ │ ☑️ 远场定水头边界                           │ │
│ │ ☑️ 混凝土强度发展                   │ │ ☐ 降雨入渗                                 │ │
│ └─────────────────────────────────────┘ └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                          🔴 专家参数面板 (专家模式才显示)                                  │
│ ┌─────────────────────────────────────┐ ┌─────────────────────────────────────────────┐ │
│ │        🧠 高级求解器设置             │ │            🖥️ 并行计算优化                   │ │
│ │                                    │ │                                            │ │
│ │ 预条件子:                           │ │ ☑️ 启用并行计算                             │ │
│ │ [ILU预条件    ▼]                   │ │ 线程数: [4       ] 个                      │ │
│ │                                    │ │                                            │ │
│ │ 求解器容差: [1e-9    ]              │ │ 区域分解:                                   │ │
│ │ Krylov空间: [30      ]              │ │ [METIS分解    ▼]                           │ │
│ │                                    │ │                                            │ │
│ │ 矩阵存储:                           │ │ ☑️ 内存优化                                 │ │
│ │ [稀疏存储     ▼]                    │ │ ☐ 核外求解器                               │ │
│ │                                    │ │ ☑️ 缓存优化                                 │ │
│ │ 刚度更新:                           │ │                                            │ │
│ │ [每次迭代     ▼]                    │ │ 内存限制: [8.0    ] GB                     │ │
│ └─────────────────────────────────────┘ └─────────────────────────────────────────────┘ │
│                                                                                         │
│ ┌─────────────────────────────────────┐ ┌─────────────────────────────────────────────┐ │
│ │        🔬 调试与诊断工具             │ │            📊 性能监控                       │ │
│ │                                    │ │                                            │ │
│ │ ☐ 详细输出模式                      │ │ ☑️ 收敛监控                                 │ │
│ │ ☑️ 收敛历史跟踪                     │ │ ☐ 残差历史记录                             │ │
│ │ ☐ 性能分析                         │ │ ☐ 性能剖析                                 │ │
│ │ ☐ 内存使用监控                      │ │                                            │ │
│ │                                    │ │ CPU使用率: ████████░░ 80%                  │ │
│ │ 日志级别:                           │ │ 内存使用: ████░░░░░░ 40%                   │ │
│ │ [标准        ▼]                    │ │ 网络I/O: ██░░░░░░░░ 20%                    │ │
│ │                                    │ │                                            │ │
│ │ 输出目录:                           │ │ 预计完成: 15:30 (12分钟后)                 │ │
│ │ [选择目录...]                      │ │                                            │ │
│ └─────────────────────────────────────┘ └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

## 🎯 **关键计算参数默认值逻辑**

### ⚙️ **基础求解参数**
- **analysis_type: 'static'** - 90%深基坑分析是静力分析
- **solver_type: 'direct'** - 直接法更稳定，适合中等规模问题
- **max_iterations: 50** - 平衡收敛性和计算时间
- **convergence_tolerance: 1e-6** - 工程精度要求

### 🏗️ **施工过程参数**
- **construction_stages: 自动计算** - 基于开挖深度，每3m一个阶段
- **stage_duration: 7天** - 典型施工周期
- **excavation_method: 'top_down'** - 最常用的自上而下开挖

### 🌊 **地下水控制**
- **dewatering_enabled: true** - 深基坑必须考虑降水
- **seepage_coupling: true** - 渗流-应力耦合分析
- **water_table_drawdown_rate: 0.5m/day** - 安全的降水速率

### 🔧 **非线性控制**
- **geometric_nonlinearity: true** - 深基坑大变形必须考虑
- **material_nonlinearity: false** - 工程分析一般线性够用
- **contact_nonlinearity: true** - 土-结构接触重要

这个计算参数设计既保持了专业完整性，又通过智能默认值和实时监控大大提升了用户体验！你觉得这些参数设置合理吗？🎯

<function_calls>
<invoke name="TodoWrite">
<parameter name="todos">[{"content": "\u8be6\u7ec6\u5217\u51fa\u8ba1\u7b97\u53c2\u6570\u5e76\u8bbe\u8ba1\u754c\u9762\u793a\u610f\u56fe", "status": "completed", "priority": "high", "id": "detail_computation_parameters_interface"}]
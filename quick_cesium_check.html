<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿«é€ŸCesiumæ£€æŸ¥</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #ffffff;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .check-item {
            background: #2a2a2a;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #666;
        }
        .check-item.ok { border-left-color: #00ff00; }
        .check-item.error { border-left-color: #ff0000; }
        .check-item.warning { border-left-color: #ffaa00; }
        .test-button {
            background: #0066cc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        .test-button:hover { background: #0088ff; }
        .code-block {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            overflow-x: auto;
            margin: 10px 0;
            border: 1px solid #444;
        }
        .instructions {
            background: #2a4a2a;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #4a6a4a;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” å¿«é€ŸCesiumé—®é¢˜æ£€æŸ¥æŒ‡å—</h1>
        
        <div class="instructions">
            <h2>ğŸ“‹ æ£€æŸ¥æ­¥éª¤</h2>
            <p>å¦‚æœæ‚¨çœ‹åˆ°Cesiumåœ°å›¾æ˜¾ç¤ºä¸ºé»‘è‰²ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ£€æŸ¥ï¼š</p>
            <ol>
                <li><strong>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·</strong> - æŒ‰F12é”®</li>
                <li><strong>åˆ‡æ¢åˆ°Consoleæ ‡ç­¾</strong></li>
                <li><strong>æŸ¥æ‰¾çº¢è‰²é”™è¯¯ä¿¡æ¯</strong></li>
                <li><strong>æ£€æŸ¥Networkæ ‡ç­¾</strong> - çœ‹æ˜¯å¦æœ‰å¤±è´¥çš„ç½‘ç»œè¯·æ±‚</li>
                <li><strong>è¿è¡Œä¸‹é¢çš„è¯Šæ–­ä»£ç </strong></li>
            </ol>
        </div>
        
        <h2>ğŸ› ï¸ æµè§ˆå™¨æ§åˆ¶å°è¯Šæ–­ä»£ç </h2>
        <p>å¤åˆ¶ä¸‹é¢çš„ä»£ç åˆ°æµè§ˆå™¨æ§åˆ¶å°ä¸­è¿è¡Œï¼š</p>
        
        <div class="code-block">
// === Cesiumå¿«é€Ÿè¯Šæ–­ä»£ç  ===
console.log('ğŸš€ å¼€å§‹Cesiumå¿«é€Ÿè¯Šæ–­...');

// 1. æ£€æŸ¥Cesiumåº“
console.log('1ï¸âƒ£ æ£€æŸ¥Cesiumåº“:');
if (typeof Cesium !== 'undefined') {
    console.log('âœ… Cesiumåº“å·²åŠ è½½ï¼Œç‰ˆæœ¬:', Cesium.VERSION || 'Unknown');
} else {
    console.log('âŒ Cesiumåº“æœªåŠ è½½');
    console.log('è§£å†³æ–¹æ¡ˆ:');
    console.log('  - æ£€æŸ¥ç½‘ç»œè¿æ¥');
    console.log('  - ç¡®è®¤CDNåœ°å€å¯è®¿é—®');
    console.log('  - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®');
}

// 2. æ£€æŸ¥WebGL
console.log('2ï¸âƒ£ æ£€æŸ¥WebGL:');
const canvas = document.createElement('canvas');
const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
if (gl) {
    console.log('âœ… WebGLå¯ç”¨ï¼ŒGPU:', gl.getParameter(gl.RENDERER));
} else {
    console.log('âŒ WebGLä¸å¯ç”¨');
    console.log('è§£å†³æ–¹æ¡ˆ:');
    console.log('  - æ›´æ–°æµè§ˆå™¨åˆ°æœ€æ–°ç‰ˆæœ¬');
    console.log('  - å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ');
    console.log('  - æ›´æ–°æ˜¾å¡é©±åŠ¨');
}

// 3. æ£€æŸ¥åœ°å›¾å®¹å™¨
console.log('3ï¸âƒ£ æ£€æŸ¥åœ°å›¾å®¹å™¨:');
const containers = document.querySelectorAll('#cesiumContainer, [id*="cesium"], [class*="cesium"]');
if (containers.length > 0) {
    console.log(`âœ… æ‰¾åˆ°${containers.length}ä¸ªCesiumå®¹å™¨`);
    containers.forEach((container, i) => {
        const rect = container.getBoundingClientRect();
        console.log(`  å®¹å™¨${i+1}: ${rect.width}x${rect.height}px`);
        if (rect.width === 0 || rect.height === 0) {
            console.log('  âš ï¸ å®¹å™¨å°ºå¯¸ä¸º0ï¼Œå¯èƒ½æ˜¯CSSé—®é¢˜');
        }
    });
} else {
    console.log('âŒ æœªæ‰¾åˆ°Cesiumå®¹å™¨');
}

// 4. æ£€æŸ¥ç½‘ç»œè¯·æ±‚
console.log('4ï¸âƒ£ æ£€æŸ¥å…³é”®èµ„æº:');
const scripts = document.querySelectorAll('script[src*="cesium"], link[href*="cesium"]');
scripts.forEach((script, i) => {
    const url = script.src || script.href;
    console.log(`  èµ„æº${i+1}: ${url}`);
    // ç®€å•çš„å¯è®¿é—®æ€§æµ‹è¯•
    fetch(url, {method: 'HEAD', mode: 'no-cors'})
        .then(() => console.log('  âœ… å¯è®¿é—®'))
        .catch(e => console.log('  âŒ è®¿é—®å¤±è´¥:', e.message));
});

// 5. æ£€æŸ¥Ionä»¤ç‰Œ
console.log('5ï¸âƒ£ æ£€æŸ¥Ionä»¤ç‰Œ:');
if (typeof Cesium !== 'undefined' && Cesium.Ion) {
    if (Cesium.Ion.defaultAccessToken) {
        console.log('âœ… Ionè®¿é—®ä»¤ç‰Œå·²è®¾ç½®');
        console.log('  ä»¤ç‰Œ:', Cesium.Ion.defaultAccessToken.substring(0, 20) + '...');
    } else {
        console.log('âš ï¸ Ionè®¿é—®ä»¤ç‰Œæœªè®¾ç½®');
    }
} else {
    console.log('âŒ Cesium.Ionä¸å¯ç”¨');
}

// 6. å¸¸è§é”™è¯¯æ£€æŸ¥
console.log('6ï¸âƒ£ å¸¸è§é—®é¢˜æ£€æŸ¥:');
const commonIssues = [
    {
        check: () => navigator.onLine,
        message: 'ç½‘ç»œè¿æ¥',
        solution: 'æ£€æŸ¥ç½‘ç»œè¿æ¥'
    },
    {
        check: () => window.innerWidth > 0 && window.innerHeight > 0,
        message: 'çª—å£å°ºå¯¸',
        solution: 'ç¡®ä¿çª—å£æœ‰æœ‰æ•ˆå°ºå¯¸'
    },
    {
        check: () => !document.hidden,
        message: 'é¡µé¢å¯è§æ€§',
        solution: 'ç¡®ä¿é¡µé¢åœ¨å‰å°'
    }
];

commonIssues.forEach(issue => {
    if (issue.check()) {
        console.log(`  âœ… ${issue.message}: æ­£å¸¸`);
    } else {
        console.log(`  âŒ ${issue.message}: å¼‚å¸¸`);
        console.log(`     è§£å†³æ–¹æ¡ˆ: ${issue.solution}`);
    }
});

console.log('âœ… è¯Šæ–­å®Œæˆï¼');
console.log('å¦‚æœä»æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ä¸Šè¿°é”™è¯¯ä¿¡æ¯å¹¶æŒ‰å»ºè®®è§£å†³ã€‚');
        </div>
        
        <button class="test-button" onclick="copyToClipboard()">ğŸ“‹ å¤åˆ¶è¯Šæ–­ä»£ç </button>
        <button class="test-button" onclick="openDevTools()">ğŸ”§ æ‰“å¼€å¼€å‘è€…å·¥å…·è¯´æ˜</button>
        
        <h2>ğŸ” å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h2>
        
        <div class="check-item">
            <h3>âŒ é—®é¢˜ï¼šCesiumåº“æœªåŠ è½½</h3>
            <p><strong>ç—‡çŠ¶ï¼š</strong>æ§åˆ¶å°æ˜¾ç¤º "Cesium is not defined" é”™è¯¯</p>
            <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
            <ul>
                <li>æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œç¡®ä¿èƒ½è®¿é—® cesium.com</li>
                <li>æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼Œç¡®ä¿å…è®¸è®¿é—®å¤–éƒ¨CDN</li>
                <li>å°è¯•ä½¿ç”¨VPNæˆ–æ›´æ¢ç½‘ç»œç¯å¢ƒ</li>
                <li>è€ƒè™‘ä¸‹è½½Cesiumåº“åˆ°æœ¬åœ°ä½¿ç”¨</li>
            </ul>
        </div>
        
        <div class="check-item">
            <h3>âŒ é—®é¢˜ï¼šWebGLä¸æ”¯æŒ</h3>
            <p><strong>ç—‡çŠ¶ï¼š</strong>åœ°å›¾æ˜¾ç¤ºé»‘è‰²ï¼Œæ§åˆ¶å°æ˜¾ç¤ºWebGLç›¸å…³é”™è¯¯</p>
            <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
            <ul>
                <li>æ›´æ–°æµè§ˆå™¨åˆ°æœ€æ–°ç‰ˆæœ¬</li>
                <li>å¯ç”¨æµè§ˆå™¨ç¡¬ä»¶åŠ é€Ÿ</li>
                <li>æ›´æ–°æ˜¾å¡é©±åŠ¨ç¨‹åº</li>
                <li>å°è¯•ä¸åŒçš„æµè§ˆå™¨ï¼ˆChromeã€Firefoxã€Edgeï¼‰</li>
            </ul>
        </div>
        
        <div class="check-item">
            <h3>âŒ é—®é¢˜ï¼šIonè®¿é—®ä»¤ç‰Œæ— æ•ˆ</h3>
            <p><strong>ç—‡çŠ¶ï¼š</strong>åœ°å›¾æ˜¾ç¤ºä½†ç“¦ç‰‡æ— æ³•åŠ è½½</p>
            <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
            <ul>
                <li>æ£€æŸ¥Cesium Ionä»¤ç‰Œæ˜¯å¦æœ‰æ•ˆ</li>
                <li>ä½¿ç”¨OpenStreetMapç­‰å…è´¹åº•å›¾</li>
                <li>æ³¨å†Œæ–°çš„Cesium Ionè´¦æˆ·è·å–ä»¤ç‰Œ</li>
            </ul>
        </div>
        
        <div class="check-item">
            <h3>âŒ é—®é¢˜ï¼šå®¹å™¨å°ºå¯¸ä¸º0</h3>
            <p><strong>ç—‡çŠ¶ï¼š</strong>åœ°å›¾å®¹å™¨å­˜åœ¨ä½†ä¸æ˜¾ç¤ºå†…å®¹</p>
            <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
            <ul>
                <li>æ£€æŸ¥CSSæ ·å¼ï¼Œç¡®ä¿å®¹å™¨æœ‰æ˜ç¡®çš„widthå’Œheight</li>
                <li>ç¡®ä¿çˆ¶å…ƒç´ ä¹Ÿæœ‰æ­£ç¡®çš„å°ºå¯¸</li>
                <li>æ£€æŸ¥æ˜¯å¦æœ‰CSSå†²çª</li>
            </ul>
        </div>
        
        <h2>ğŸ› ï¸ å¿«é€Ÿä¿®å¤å»ºè®®</h2>
        
        <div class="code-block">
// å¦‚æœCesiumåº“åŠ è½½å¤±è´¥ï¼Œå¯ä»¥å°è¯•è¿™ä¸ªé™çº§æ–¹æ¡ˆï¼š
const script = document.createElement('script');
script.src = 'https://unpkg.com/cesium@1.110.0/Build/Cesium/Cesium.js';
script.onload = () => console.log('âœ… Cesiumåº“é€šè¿‡unpkg CDNåŠ è½½æˆåŠŸ');
script.onerror = () => console.log('âŒ unpkg CDNä¹Ÿæ— æ³•è®¿é—®');
document.head.appendChild(script);

const link = document.createElement('link');
link.rel = 'stylesheet';
link.href = 'https://unpkg.com/cesium@1.110.0/Build/Cesium/Widgets/widgets.css';
document.head.appendChild(link);
        </div>
        
        <h2>ğŸ“ è·å–æ›´å¤šå¸®åŠ©</h2>
        <p>å¦‚æœä»¥ä¸Šæ­¥éª¤éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·ï¼š</p>
        <ol>
            <li>æˆªå›¾é”™è¯¯ä¿¡æ¯</li>
            <li>è®°å½•æµè§ˆå™¨ç‰ˆæœ¬å’Œæ“ä½œç³»ç»Ÿä¿¡æ¯</li>
            <li>æä¾›ç½‘ç»œç¯å¢ƒæè¿°ï¼ˆæ˜¯å¦æœ‰é˜²ç«å¢™ã€ä»£ç†ç­‰ï¼‰</li>
            <li>è”ç³»æŠ€æœ¯æ”¯æŒ</li>
        </ol>
    </div>
    
    <script>
        function copyToClipboard() {
            const code = document.querySelector('.code-block').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('è¯Šæ–­ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼\n\nè¯·ï¼š\n1. æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·\n2. ç‚¹å‡»Consoleæ ‡ç­¾\n3. ç²˜è´´ä»£ç å¹¶æŒ‰Enterè¿è¡Œ');
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                // é™çº§æ–¹æ¡ˆï¼šé€‰ä¸­æ–‡æœ¬
                const range = document.createRange();
                range.selectNode(document.querySelector('.code-block'));
                window.getSelection().removeAllRanges();
                window.getSelection().addRange(range);
                alert('è¯·æ‰‹åŠ¨å¤åˆ¶é€‰ä¸­çš„ä»£ç ');
            });
        }
        
        function openDevTools() {
            alert('å¦‚ä½•æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼š\n\n' +
                  'æ–¹æ³•1: æŒ‰F12é”®\n' +
                  'æ–¹æ³•2: å³é”®ç‚¹å‡»é¡µé¢ â†’ æ£€æŸ¥/æ£€æŸ¥å…ƒç´ \n' +
                  'æ–¹æ³•3: Ctrl+Shift+I (Windows) æˆ– Cmd+Option+I (Mac)\n\n' +
                  'æ‰“å¼€åï¼Œç‚¹å‡»Consoleæ ‡ç­¾æŸ¥çœ‹é”™è¯¯ä¿¡æ¯');
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„æç¤º
        window.addEventListener('load', () => {
            console.log('ğŸ” Cesiumé—®é¢˜æ£€æŸ¥é¡µé¢å·²åŠ è½½');
            console.log('ğŸ’¡ æç¤ºï¼šå¦‚æœæ‚¨æ­£åœ¨æŸ¥çœ‹è¿™ä¸ªé¡µé¢ï¼Œè¯´æ˜åŸºæœ¬çš„HTMLå’ŒJavaScriptåŠŸèƒ½æ­£å¸¸');
            console.log('ğŸ“‹ å¤åˆ¶ä¸Šé¢çš„è¯Šæ–­ä»£ç åˆ°æ‚¨çš„åº”ç”¨é¡µé¢çš„æ§åˆ¶å°ä¸­è¿è¡Œ');
        });
    </script>
</body>
</html>
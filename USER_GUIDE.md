# DeepCAD 用户使用指南

## 版本信息
- **指南版本**: v2.0
- **适用系统**: DeepCAD Phase 2
- **最后更新**: 2025年1月
- **面向用户**: 岩土工程师、结构工程师、CAE分析师

## 🚀 快速开始

### 系统启动

1. **启动前端界面**
   ```bash
   cd frontend
   npm run dev
   ```
   访问 `http://localhost:5173` 进入系统

2. **启动后端服务**
   ```bash
   python start_backend.py
   ```
   后端服务运行在 `http://localhost:8000`

3. **系统初始化**
   - 首次使用会自动进行系统检查
   - 等待所有专家模块加载完成
   - 确认GPU加速功能可用性

## 📋 完整工作流程

### 第一步：项目创建与管理

1. **进入Epic控制中心**
   - 点击主界面左上角的Epic控制中心按钮
   - 系统会自动切换到项目管理模式

2. **创建新项目**
   ```
   项目名称: [深基坑工程名称]
   项目类型: 深基坑CAE分析
   地质条件: [选择地质类型]
   设计深度: [输入开挖深度]
   ```

3. **项目飞行系统导航**
   - 使用3D飞行控制在项目空间中导航
   - 查看项目概览和进度状态
   - 访问各专家模块工作空间

### 第二步：几何建模 (2号专家工作空间)

#### 2.1 DXF文件导入

1. **文件准备**
   - 确保DXF文件包含完整的开挖轮廓
   - 推荐使用AutoCAD 2018及以上版本导出
   - 文件大小建议控制在50MB以内

2. **导入操作**
   ```
   几何建模工作空间 → 基坑开挖建模 → DXF导入
   ├── 选择DXF文件
   ├── 预览几何内容
   ├── 质量检查报告
   └── 确认导入
   ```

3. **质量评估**
   - 系统自动分析几何质量
   - 显示质量评分 (0-1分，≥0.7为优秀)
   - 提供几何优化建议

#### 2.2 几何优化处理

1. **智能优化**
   ```
   几何算法集成 → 智能几何优化
   ├── 目标网格尺寸: 1.5-2.0m (推荐)
   ├── 质量阈值: 0.65-0.8
   ├── 最大单元数: 50万-100万
   └── 执行优化
   ```

2. **布尔运算**
   - 支持复杂几何的并集、差集、交集
   - 自动处理几何体重叠和间隙
   - 实时3D预览运算结果

#### 2.3 支护结构建模

1. **桩基支护设计**
   ```
   支护结构建模 → 桩基支护 → 选择桩基类型
   
   置换型桩基 (梁元建模):
   ├── 钻孔灌注桩 - 适用于各种土质，承载力大
   ├── 人工挖孔桩 - 直径大，质量可控，浅层应用
   └── 预制管桩 - 施工快速，适用软土地基
   
   挤密型桩基 (壳元建模):
   ├── SWM工法桩 - 软黏土改良，环保经济
   ├── CFG桩 - 复合地基，沉降控制好
   └── 高压旋喷桩 - 复杂地质，既承载又防渗
   ```

2. **参数配置**
   ```
   桩基参数设置:
   ├── 桩径: 600-2000mm (根据桩型)
   ├── 桩长: 15-80m 
   ├── 间距: 1.5-3.0m
   ├── 布置形式: 矩形/梅花形
   └── 材料属性: 系统自动匹配
   ```

3. **其他支护结构**
   - 地下连续墙：厚度600-1200mm
   - 锚索系统：预应力锚杆/锚索
   - 钢支撑：H型钢或钢管支撑

### 第三步：网格生成

#### 3.1 网格参数设置

1. **基本参数**
   ```
   网格生成参数:
   ├── 全局单元尺寸: 2.0m (推荐起始值)
   ├── 最小单元尺寸: 0.5m
   ├── 最大单元尺寸: 5.0m
   ├── 网格算法: Delaunay (推荐)
   └── 质量阈值: 0.3 (可接受)
   ```

2. **网格细化区域**
   ```
   重点区域细化:
   ├── 支护结构界面: 0.8m (应力集中)
   ├── 开挖边界: 1.0m (变形梯度大)
   ├── 桩土接触面: 0.6m (相互作用重要)
   └── 地下水位面: 1.2m (渗透边界)
   ```

#### 3.2 网格生成过程

1. **自动生成**
   ```
   网格生成流程:
   ├── 几何预处理 (15%)
   ├── 表面网格生成 (35%)
   ├── 体积网格生成 (65%)
   ├── 网格质量优化 (85%)
   └── 质量检查与验证 (100%)
   ```

2. **质量监控**
   - 实时显示生成进度
   - 自动检测低质量单元
   - 提供优化建议

#### 3.3 Kratos质量评估

1. **质量指标解读**
   ```
   质量评估标准:
   ├── 长宽比 ≤ 3.0 (优秀) / ≤ 10.0 (可接受)
   ├── 偏斜度 ≤ 0.25 (优秀) / ≤ 0.6 (可接受)
   ├── 雅可比 ≥ 0.5 (优秀) / ≥ 0.1 (可接受)
   └── 正交性 ≥ 0.8 (优秀) / ≥ 0.5 (可接受)
   ```

2. **质量优化**
   - 启用自适应网格细化
   - 调整局部网格密度
   - 使用高阶单元

### 第四步：计算分析 (3号专家工作空间)

#### 4.1 Kratos计算设置

1. **求解器配置**
   ```
   求解器设置:
   ├── 求解器类型: mechanical_newton_raphson
   ├── 收敛准则: 
   │   ├── 残差容限: 1e-6
   │   ├── 位移容限: 1e-6
   │   └── 最大迭代: 30
   └── 时间积分: 静力分析/动力分析
   ```

2. **材料参数**
   ```
   典型土体参数:
   ├── 密度: 1800 kg/m³
   ├── 弹性模量: 8 MPa
   ├── 泊松比: 0.35
   ├── 粘聚力: 25 kPa
   ├── 内摩擦角: 18°
   └── 渗透系数: 1e-9 m/s
   ```

#### 4.2 边界条件设置

1. **位移边界条件**
   ```
   边界约束:
   ├── 底部边界: 完全固定 (Tx=Ty=Tz=0)
   ├── 侧面边界: 法向约束 (Tn=0)
   ├── 顶面边界: 自由面
   └── 开挖面: 无约束
   ```

2. **荷载条件**
   ```
   荷载类型:
   ├── 自重荷载: 自动计算
   ├── 地面超载: 20 kPa (典型值)
   ├── 施工荷载: 根据实际情况
   └── 地下水压力: 静水压力分布
   ```

#### 4.3 分析执行

1. **计算流程**
   ```
   计算执行步骤:
   ├── 预处理: 数据格式转换
   ├── 求解计算: Kratos引擎
   ├── 后处理: 结果提取
   └── 可视化: PyVista渲染
   ```

2. **并行计算**
   - 自动检测GPU资源
   - 多核CPU并行支持
   - 大模型分布式计算

### 第五步：结果可视化与分析

#### 5.1 PyVista科学可视化

1. **结果类型**
   ```
   可视化结果:
   ├── 位移云图: 总位移/X/Y/Z方向位移
   ├── 应力云图: Von Mises应力/主应力
   ├── 应变云图: 总应变/剪应变
   ├── 渗流场: 孔隙水压力/渗流速度
   └── 接触应力: 桩土接触/结构接触
   ```

2. **交互式分析**
   ```
   分析功能:
   ├── 3D自由旋转查看
   ├── 剖面切片分析
   ├── 数值探针取值
   ├── 等值线/等值面显示
   └── 动画播放 (时程分析)
   ```

#### 5.2 工程判断与评估

1. **安全性评价**
   ```
   关键指标检查:
   ├── 最大水平位移 < 30mm (H/1000)
   ├── 最大沉降 < 30mm
   ├── 支护结构应力 < 设计强度×0.8
   ├── 地下水位稳定
   └── 临近建筑影响评估
   ```

2. **设计优化建议**
   - 支护参数调整建议
   - 施工工序优化
   - 监测点位布置建议

## 🔧 高级功能使用

### GPU加速计算

1. **GPU设置检查**
   ```
   系统设置 → GPU加速设置
   ├── 检测GPU型号和驱动
   ├── 设置内存使用限制
   ├── 选择计算精度 (FP32/FP16)
   └── 启用GPU加速开关
   ```

2. **性能优化**
   - 大模型自动分批处理
   - 智能内存管理
   - 计算结果缓存

### 多物理场耦合分析

1. **渗流-应力耦合**
   ```
   耦合分析设置:
   ├── 启用流固耦合
   ├── 设置渗透边界条件
   ├── 配置孔压-有效应力关系
   └── 时间步长控制
   ```

2. **热-力耦合**
   - 温度场分析
   - 热应力计算
   - 材料热膨胀效应

### 自适应网格细化

1. **误差估计**
   ```
   自适应设置:
   ├── 误差估计方法: ZZ/SPR
   ├── 细化准则: 相对误差 < 5%
   ├── 最大细化层数: 3层
   └── 内存使用限制
   ```

2. **动态细化**
   - 实时监控单元质量
   - 自动标记细化区域
   - 保持几何兼容性

## 📊 项目管理与协作

### 专家协作模式

1. **工作流程协调**
   ```
   专家协作流程:
   ├── 1号专家: 项目协调和资源分配
   ├── 2号专家: 几何建模和优化
   ├── 3号专家: 数值计算和分析
   └── 0号架构师: 系统架构和优化
   ```

2. **数据共享机制**
   - 实时数据同步
   - 版本控制管理
   - 冲突检测和解决

### 项目文件管理

1. **文件组织结构**
   ```
   项目文件夹:
   ├── geometry/          # 几何文件
   │   ├── original/      # 原始DXF文件
   │   ├── processed/     # 处理后几何
   │   └── optimized/     # 优化几何
   ├── mesh/             # 网格文件
   │   ├── quality_reports/ # 质量报告
   │   └── kratos_data/   # Kratos格式数据
   ├── computation/      # 计算文件
   │   ├── input/        # 输入文件
   │   ├── results/      # 计算结果
   │   └── postprocess/  # 后处理数据
   └── reports/          # 分析报告
   ```

2. **版本控制**
   - 自动备份重要节点
   - 支持版本回滚
   - 变更日志记录

## ⚠️ 注意事项与最佳实践

### 性能优化建议

1. **硬件配置建议**
   ```
   推荐配置:
   ├── CPU: Intel i7/AMD Ryzen 7 及以上
   ├── 内存: 32GB RAM (最低16GB)
   ├── GPU: NVIDIA RTX 3060及以上 (可选)
   ├── 存储: SSD固态硬盘 500GB+
   └── 网络: 稳定的宽带连接
   ```

2. **系统优化**
   - 关闭不必要的后台程序
   - 确保足够的虚拟内存
   - 定期清理临时文件

### 数据质量控制

1. **输入数据检查**
   ```
   数据质量清单:
   ├── DXF文件完整性检查
   ├── 几何体封闭性验证
   ├── 尺寸和单位统一
   ├── 材料参数合理性
   └── 边界条件完整性
   ```

2. **计算结果验证**
   - 位移变形合理性检查
   - 应力分布连续性验证
   - 反力平衡检查
   - 能量守恒验证

### 常见问题解决

1. **几何导入问题**
   ```
   问题排查:
   ├── DXF版本兼容性 → 使用AutoCAD 2018+版本
   ├── 文件编码问题 → 确保UTF-8编码
   ├── 几何体不封闭 → 使用CAD软件修复
   └── 尺寸过大/过小 → 检查单位设置
   ```

2. **网格生成问题**
   ```
   解决方案:
   ├── 网格质量差 → 减小全局单元尺寸
   ├── 生成时间过长 → 简化几何复杂度
   ├── 内存不足 → 增加虚拟内存
   └── 程序崩溃 → 检查GPU驱动版本
   ```

3. **计算收敛问题**
   ```
   调整策略:
   ├── 增加迭代次数
   ├── 放宽收敛标准
   ├── 使用增量加载
   ├── 检查边界条件
   └── 简化非线性设置
   ```

## 📈 结果解读与工程应用

### 变形分析

1. **位移结果解读**
   ```
   位移分析要点:
   ├── 最大水平位移位置和数值
   ├── 沉降分布规律
   ├── 隆起变形区域
   ├── 支护结构变形
   └── 影响范围评估
   ```

2. **工程判断标准**
   - JGJ 120规范要求
   - 地方标准和经验值
   - 临近建筑保护要求

### 应力分析

1. **应力云图分析**
   ```
   应力评估重点:
   ├── Von Mises等效应力分布
   ├── 主应力方向和大小
   ├── 剪应力集中区域
   ├── 支护结构受力状态
   └── 潜在破坏模式识别
   ```

2. **安全性评价**
   - 材料强度安全系数
   - 结构稳定性分析
   - 长期性能评估

### 渗流分析

1. **渗流场特征**
   ```
   渗流分析内容:
   ├── 孔隙水压力分布
   ├── 渗流速度矢量
   ├── 渗流量计算
   ├── 临界水力梯度
   └── 渗透稳定性评价
   ```

2. **工程应用**
   - 降水设计优化
   - 防渗措施设计
   - 渗流监测布置

## 🎯 专业应用案例

### 案例1：地铁车站深基坑

**工程概况**:
- 开挖深度: 18m
- 基坑尺寸: 120m × 25m
- 地质条件: 淤泥质粘土+砂层
- 支护方案: 地下连续墙+钢支撑

**建模要点**:
1. 精确建立地层模型
2. 考虑临近建筑荷载
3. 模拟分层开挖过程
4. 分析支撑预加力影响

**关键技术**:
- 多阶段施工模拟
- 流固耦合分析
- 支护结构优化
- 变形控制措施

### 案例2：高层建筑地下室

**工程概况**:
- 开挖深度: 12m
- 基坑形状: 不规则多边形
- 地质条件: 软土地基
- 支护方案: 钻孔灌注桩+锚索

**建模要点**:
1. 复杂几何体建模
2. 桩基承载力计算
3. 锚索预应力分析
4. 地下水控制模拟

**关键技术**:
- 非规则几何处理
- 桩-土相互作用
- 预应力锚索建模
- 多目标优化设计

## 📚 学习资源与技术支持

### 培训资料

1. **视频教程**
   - 基础操作入门 (2小时)
   - 高级功能详解 (4小时)
   - 典型案例分析 (6小时)
   - 故障排除指南 (1小时)

2. **技术文档**
   - 理论手册: 深基坑工程基础理论
   - 算法文档: 数值方法和实现
   - API参考: 二次开发接口
   - 最佳实践: 工程应用经验

### 技术支持

1. **在线支持**
   - 技术论坛: 用户交流和问题讨论
   - 在线客服: 工作时间实时答疑
   - 远程协助: 复杂问题远程解决
   - 软件更新: 自动推送和安装

2. **专业服务**
   - 定制化培训
   - 工程咨询服务
   - 二次开发支持
   - 长期技术顾问

---

**使用说明**: 本指南涵盖DeepCAD系统的主要功能和操作流程。建议新用户按照快速开始章节逐步学习，有经验的用户可直接查阅相关章节。如遇问题请联系技术支持团队。
# Three.jsä¾èµ–æ¸…ç†æ–¹æ¡ˆ

## ğŸ¯ ç›®æ ‡
ç»Ÿä¸€Three.jsç‰ˆæœ¬åˆ° `0.164.1`ï¼Œç§»é™¤ä¸å¿…è¦çš„ä¾èµ–ï¼Œå‡å°‘åŒ…ä½“ç§¯å’Œç‰ˆæœ¬å†²çªã€‚

## ğŸ“‹ å½“å‰çŠ¶å†µåˆ†æ

### âœ… ä¿ç•™çš„æ ¸å¿ƒä¾èµ–
```json
{
  "three": "^0.164.1",           // æ ¸å¿ƒåº“ - å¿…éœ€
  "three-stdlib": "^2.36.0",    // æ ‡å‡†æ‰©å±• - å¿…éœ€ï¼ˆåŠ è½½å™¨ç­‰ï¼‰
  "@types/three": "^0.161.2"    // TypeScriptç±»å‹ - å¿…éœ€
}
```

### âš ï¸ éœ€è¦è¯„ä¼°çš„ä¾èµ–
```json
{
  "@react-three/fiber": "^9.2.0",    // Reacté›†æˆ - å¯é€‰ï¼ˆæˆ‘ä»¬æœ‰CAEThreeEngineï¼‰
  "@react-three/drei": "^10.5.1"     // å·¥å…·ç»„ä»¶ - å¯é€‰ï¼ˆéƒ¨åˆ†ç»„ä»¶ä½¿ç”¨ï¼‰
}
```

### âŒ å»ºè®®ç§»é™¤çš„ä¾èµ–
```json
{
  "@monogrid/gainmap-js": "^3.1.0",        // HDRç›¸å…³ - ä¸éœ€è¦
  "@react-three/postprocessing": "^3.0.4", // åå¤„ç† - æˆ‘ä»¬æœ‰è‡ªå·±çš„ç³»ç»Ÿ
  "camera-controls": "^3.1.0",             // ç›¸æœºæ§åˆ¶ - æˆ‘ä»¬æœ‰OrbitControls
  "maath": "^0.10.8",                      // æ•°å­¦åº“ - é‡å¤åŠŸèƒ½
  "meshline": "^3.3.1",                   // çº¿æ¡æ¸²æŸ“ - ä¸å¸¸ç”¨
  "n8ao": "^1.10.1",                      // AOæ•ˆæœ - ä¸éœ€è¦
  "postprocessing": "^6.37.6",            // åå¤„ç†æ•ˆæœ - é‡å¤
  "stats-gl": "^2.4.2",                   // æ€§èƒ½ç»Ÿè®¡ - æœ‰æ›´å¥½çš„æ–¹æ¡ˆ
  "three-mesh-bvh": "^0.8.3",             // BVHåŠ é€Ÿ - æš‚ä¸éœ€è¦
  "troika-three-text": "^0.52.4",         // æ–‡æœ¬æ¸²æŸ“ - ä¸å¸¸ç”¨
  "troika-three-utils": "^0.52.4"         // å·¥å…· - ä¸å¸¸ç”¨
}
```

## ğŸ”§ æ¸…ç†æ­¥éª¤

### 1. å¤‡ä»½å½“å‰çŠ¶æ€
```bash
cp package.json package.json.backup
cp package-lock.json package-lock.json.backup
```

### 2. ç§»é™¤ä¸å¿…è¦ä¾èµ–
```bash
npm uninstall @monogrid/gainmap-js @react-three/postprocessing camera-controls maath meshline n8ao postprocessing stats-gl three-mesh-bvh troika-three-text troika-three-utils
```

### 3. æ£€æŸ¥ç»„ä»¶å…¼å®¹æ€§
æ£€æŸ¥ä»¥ä¸‹ç»„ä»¶æ˜¯å¦å—å½±å“ï¼š
- `BoreholeVisualization3D.tsx` - ä½¿ç”¨@react-three/fiberå’Œdrei
- `Model.tsx` - ä½¿ç”¨@react-three/dreiçš„useGLTF

### 4. è¿ç§»æ–¹æ¡ˆ
å¯¹äºä½¿ç”¨@react-threeçš„ç»„ä»¶ï¼Œæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š
- **Aæ–¹æ¡ˆ**ï¼šä¿ç•™@react-three/fiberå’Œ@react-three/drei
- **Bæ–¹æ¡ˆ**ï¼šé‡å†™ä¸ºåŸç”ŸThree.jsï¼Œé›†æˆåˆ°CAEThreeEngine

## ğŸ“Š é¢„æœŸæ”¶ç›Š

### åŒ…ä½“ç§¯å‡å°‘
- é¢„è®¡å‡å°‘ 15-20MB
- æ„å»ºæ—¶é—´å‡å°‘ 20%
- ä¾èµ–å†²çªæ¶ˆé™¤

### æ€§èƒ½æå‡
- ç»Ÿä¸€Three.jsç‰ˆæœ¬ï¼Œé¿å…é‡å¤åŠ è½½
- å‡å°‘bundleä¸­çš„æ­»ä»£ç 
- æ›´å¿«çš„å¯åŠ¨æ—¶é—´

### ç»´æŠ¤æ€§æ”¹å–„
- å•ä¸€Three.jsç‰ˆæœ¬ï¼Œæ›´å®¹æ˜“å‡çº§
- å‡å°‘ç±»å‹å†²çª
- æ¸…æ™°çš„ä¾èµ–å…³ç³»

## ğŸš€ æ¨èè¡ŒåŠ¨
1. **ç«‹å³æ‰§è¡Œ**ï¼šç§»é™¤æ˜æ˜¾ä¸éœ€è¦çš„ä¾èµ–
2. **è°¨æ…è¯„ä¼°**ï¼š@react-threeç›¸å…³ä¾èµ–çš„å»ç•™
3. **é€æ­¥è¿ç§»**ï¼šå°†æ—§ç»„ä»¶è¿ç§»åˆ°CAEThreeEngineæ¶æ„
4. **ç‰ˆæœ¬é”å®š**ï¼šåœ¨package.jsonä¸­é”å®šThree.jsç‰ˆæœ¬

## ğŸ“ åç»­ä»»åŠ¡
- [ ] ç§»é™¤ä¸å¿…è¦ä¾èµ–
- [ ] æµ‹è¯•ç³»ç»ŸåŠŸèƒ½å®Œæ•´æ€§  
- [ ] é‡å†™æˆ–ç§»é™¤@react-threeä¾èµ–ç»„ä»¶
- [ ] æ›´æ–°æ„å»ºé…ç½®
- [ ] æ–‡æ¡£æ›´æ–°
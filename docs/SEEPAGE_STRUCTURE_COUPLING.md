# æ¸—æµ-ç»“æ„è€¦åˆåˆ†æ

æœ¬æ–‡æ¡£ä»‹ç»æ·±åŸºå‘ç³»ç»Ÿä¸­çš„æ¸—æµ-ç»“æ„è€¦åˆåˆ†æåŠŸèƒ½ï¼ŒåŒ…æ‹¬ç†è®ºèƒŒæ™¯ã€ä½¿ç”¨æ–¹æ³•å’Œç¤ºä¾‹ã€‚

## æ¦‚è¿°

æ¸—æµ-ç»“æ„è€¦åˆåˆ†ææ˜¯ä¸€ç§å¤šç‰©ç†åœºåˆ†ææ–¹æ³•ï¼ŒåŒæ—¶è€ƒè™‘äº†åœŸä½“ä¸­çš„æ°´æµè¿åŠ¨å’ŒåŠ›å­¦å˜å½¢çš„ç›¸äº’ä½œç”¨ã€‚åœ¨æ·±åŸºå‘å·¥ç¨‹ä¸­ï¼Œè¿™ç§è€¦åˆæ•ˆåº”å¯¹äºå‡†ç¡®é¢„æµ‹å˜å½¢ã€ç¨³å®šæ€§å’Œé•¿æœŸæ€§èƒ½è‡³å…³é‡è¦ã€‚

## ç†è®ºèƒŒæ™¯

æ¸—æµ-ç»“æ„è€¦åˆåˆ†æåŸºäºä»¥ä¸‹åŸºæœ¬åŸç†ï¼š

1. **Biotå›ºç»“ç†è®º**: æè¿°å¤šå­”ä»‹è´¨ä¸­æµä½“æµåŠ¨ä¸å›ºä½“å˜å½¢ä¹‹é—´çš„ç›¸äº’ä½œç”¨
2. **è¾¾è¥¿å®šå¾‹**: æè¿°å¤šå­”ä»‹è´¨ä¸­æµä½“çš„è¿åŠ¨
3. **æœ‰æ•ˆåº”åŠ›åŸç†**: åœŸä½“ä¸­çš„æ€»åº”åŠ›ç”±æœ‰æ•ˆåº”åŠ›å’Œå­”éš™æ°´å‹åŠ›ç»„æˆ

è€¦åˆçš„å…³é”®æœºåˆ¶åŒ…æ‹¬ï¼š
- å­”éš™æ°´å‹åŠ›å¯¼è‡´çš„æœ‰æ•ˆåº”åŠ›å˜åŒ–å½±å“åœŸä½“å˜å½¢
- åœŸä½“å˜å½¢å¯¼è‡´çš„å­”éš™ç‡å˜åŒ–å½±å“æ¸—é€æ€§èƒ½å’Œæ°´æµåœº
- æ—¶é—´æ•ˆåº”ï¼šå‹å®è¿‡ç¨‹ä¸­æ°´å‹åŠ›çš„æ¶ˆæ•£

## ç³»ç»ŸåŠŸèƒ½

æœ¬ç³»ç»Ÿæ”¯æŒä»¥ä¸‹æ¸—æµ-ç»“æ„è€¦åˆåˆ†æåŠŸèƒ½ï¼š

### æ±‚è§£ç­–ç•¥

1. **ä¸€ä½“åŒ–æ±‚è§£(Monolithic)**: åŒæ—¶æ±‚è§£ç»“æ„å’Œæ¸—æµæ–¹ç¨‹ç»„ï¼Œç²¾åº¦é«˜ä½†è®¡ç®—æˆæœ¬å¤§
2. **åˆ†ç¦»å¼æ±‚è§£(Staggered)**: äº¤æ›¿æ±‚è§£ç»“æ„å’Œæ¸—æµæ–¹ç¨‹ç»„ï¼Œå¹³è¡¡è®¡ç®—æ•ˆç‡å’Œç²¾åº¦
3. **å•å‘è€¦åˆ(One-way)**: æ¸—æµåˆ†æç»“æœå½±å“ç»“æ„åˆ†æï¼Œä½†ç»“æ„å˜å½¢ä¸å½±å“æ¸—æµåœº

### åˆ†æç±»å‹

1. **ç¬æ€åˆ†æ**: ç ”ç©¶éšæ—¶é—´å˜åŒ–çš„è€¦åˆæ•ˆåº”
2. **å‡†é™æ€åˆ†æ**: åœ¨ç‰¹å®šæ—¶é—´æ­¥é•¿ä¸‹å‡è®¾è¾¾åˆ°å±€éƒ¨å¹³è¡¡
3. **ç¨³æ€åˆ†æ**: ç ”ç©¶æœ€ç»ˆå¹³è¡¡çŠ¶æ€

### ææ–™æ¨¡å‹

æ”¯æŒä»¥ä¸‹ææ–™æ¨¡å‹ä¸è€¦åˆåˆ†æï¼š
- çº¿æ€§å¼¹æ€§æ¨¡å‹
- Mohr-Coulombæ¨¡å‹
- ä¿®æ­£å‰‘æ¡¥æ¨¡å‹
- å…¶ä»–é«˜çº§åœŸä½“æœ¬æ„æ¨¡å‹

## å®ç°è¿›å±•

ç³»ç»Ÿå·²å®Œæˆäº†æ¸—æµ-ç»“æ„è€¦åˆåˆ†æçš„åŸºæœ¬æ¡†æ¶å®ç°ï¼Œç›®å‰çš„å¼€å‘è¿›åº¦çº¦ä¸º70%ã€‚

### å·²å®Œæˆéƒ¨åˆ†

âœ… ä¸€ä½“åŒ–å’Œåˆ†ç¦»å¼è€¦åˆç­–ç•¥çš„æ ¸å¿ƒç®—æ³•
âœ… å­”éš™æ°´å‹åŠ›è®¡ç®—æ¨¡å—
âœ… æ¥å£ç½‘æ ¼å¤„ç†å’Œæ•°æ®ä¼ é€’
âœ… åŸºæœ¬æ”¶æ•›å‡†åˆ™å’Œæ§åˆ¶æœºåˆ¶
âœ… ä¸»è¦APIæ¥å£è®¾è®¡å’Œå®ç°
âœ… ç¤ºä¾‹æ¡ˆä¾‹å®ç°

### è¿›è¡Œä¸­éƒ¨åˆ†

ğŸ”„ ä¼˜åŒ–ä¸€ä½“åŒ–æ±‚è§£å™¨æ€§èƒ½
ğŸ”„ å®Œå–„æ¥å£ç½‘æ ¼æ˜ å°„ç®—æ³•
ğŸ”„ æ‰©å±•æ”¶æ•›å‡†åˆ™ç±»å‹
ğŸ”„ å®ç°è‡ªé€‚åº”æ—¶é—´æ­¥é•¿

## ä½¿ç”¨æ–¹æ³•

### å‰ç«¯ç•Œé¢æ“ä½œ

1. æ‰“å¼€FEMåˆ†æé¡µé¢
2. é€‰æ‹©"è€¦åˆåˆ†æ"é€‰é¡¹å¡
3. è®¾ç½®åŸºæœ¬å‚æ•°ï¼š
   - è€¦åˆæ–¹æ¡ˆ(ä¸€ä½“åŒ–/åˆ†ç¦»å¼/å•å‘)
   - æ—¶é—´æ­¥é•¿å’Œæ€»è®¡ç®—æ—¶é—´
   - æ”¶æ•›å®¹å·®å’Œæœ€å¤§è¿­ä»£æ¬¡æ•°
   - æµä½“æ¨¡å‹ç±»å‹
4. è®¾ç½®ææ–™å±æ€§ï¼š
   - åœŸä½“å‚æ•°(å¼¹æ€§æ¨¡é‡ã€æ³Šæ¾æ¯”ã€å¯†åº¦ã€æ¸—é€ç³»æ•°ã€å­”éš™ç‡)
   - ç»“æ„å‚æ•°(å›´æŠ¤ç»“æ„çš„ææ–™å±æ€§)
5. ä¸Šä¼ æ¨¡å‹æ–‡ä»¶
6. ç‚¹å‡»"å¼€å§‹åˆ†æ"æŒ‰é’®
7. åˆ†æå®Œæˆåï¼Œå¯æŸ¥çœ‹ç»“æœæ‘˜è¦å’Œä¸‹è½½è¯¦ç»†ç»“æœ

### APIæ¥å£

ç³»ç»Ÿæä¾›ä»¥ä¸‹APIæ¥å£ç”¨äºæ¸—æµ-ç»“æ„è€¦åˆåˆ†æï¼š

```
POST /api/compute/seepage-coupling
```
å¯åŠ¨æ¸—æµ-ç»“æ„è€¦åˆåˆ†æä»»åŠ¡

è¯·æ±‚ä½“ç¤ºä¾‹ï¼š
```json
{
  "project_id": 123,
  "coupling_type": "staggered",
  "coupling_scheme": "biot",
  "time_step": 1.0,
  "total_time": 100.0,
  "max_iterations": 20,
  "convergence_tolerance": 1e-4,
  "fluid_model": "darcy",
  "material_params": {
    "soil_layers": [
      {
        "id": 1,
        "elastic_modulus": 20000,
        "poisson_ratio": 0.3,
        "permeability": 1e-8,
        "porosity": 0.4
      }
    ],
    "structures": [
      {
        "id": 2,
        "elastic_modulus": 2e7,
        "thickness": 0.5
      }
    ]
  },
  "boundary_conditions": {
    "flow": [
      {
        "type": "pressure",
        "location": "top",
        "value": 0
      }
    ],
    "structure": [
      {
        "type": "fixed",
        "location": "bottom"
      }
    ]
  }
}
```

```
GET /api/compute/seepage-coupling/{task_id}/status
```
è·å–åˆ†æä»»åŠ¡çŠ¶æ€

å“åº”ç¤ºä¾‹ï¼š
```json
{
  "task_id": "abc123",
  "status": "running",
  "progress": 45,
  "current_time": 35.0,
  "convergence_info": {
    "iteration": 3,
    "error": 2.3e-3
  }
}
```

```
GET /api/compute/seepage-coupling/{task_id}/results
```
è·å–åˆ†æç»“æœ

å“åº”ç¤ºä¾‹ï¼š
```json
{
  "task_id": "abc123",
  "status": "completed",
  "result_files": {
    "displacement": "/results/task_abc123/displacement.vtk",
    "pressure": "/results/task_abc123/pressure.vtk",
    "summary": "/results/task_abc123/summary.json"
  }
}
```

### æ ¸å¿ƒç±»APIå‚è€ƒ

ç³»ç»Ÿæä¾›äº†`FlowStructureCoupling`ç±»ç”¨äºæ¸—æµ-ç»“æ„è€¦åˆåˆ†æï¼š

```python
class FlowStructureCoupling:
    """æ¸—æµ-ç»“æ„è€¦åˆåˆ†æç±»"""
    
    def __init__(
        self,
        project_id: int,
        work_dir: str,
        coupling_type: Union[str, CouplingType] = CouplingType.STAGGERED,
        coupling_scheme: Union[str, CouplingScheme] = CouplingScheme.BIOT,
        config: Dict[str, Any] = None
    ):
        """åˆå§‹åŒ–æ¸—æµ-ç»“æ„è€¦åˆåˆ†æ"""
        pass
        
    def set_flow_model(self, model, wrapper_fn: Optional[Callable] = None):
        """è®¾ç½®æµä½“æ¨¡å‹"""
        pass
        
    def set_structure_model(self, model, wrapper_fn: Optional[Callable] = None):
        """è®¾ç½®ç»“æ„æ¨¡å‹"""
        pass
        
    def initialize(self) -> bool:
        """åˆå§‹åŒ–è€¦åˆåˆ†æ"""
        pass
        
    def solve_step(self, time_step: Optional[float] = None) -> bool:
        """æ±‚è§£ä¸€ä¸ªæ—¶é—´æ­¥"""
        pass
        
    def solve_complete(self) -> bool:
        """æ±‚è§£å®Œæ•´åˆ†æè¿‡ç¨‹"""
        pass
        
    def save_results(self, file_name: str) -> str:
        """ä¿å­˜åˆ†æç»“æœ"""
        pass
        
    def load_results(self, file_name: str) -> bool:
        """åŠ è½½å·²æœ‰åˆ†æç»“æœ"""
        pass
```

## ç¤ºä¾‹

å¯ä»¥è¿è¡Œç¤ºä¾‹è„šæœ¬è¿›è¡Œæ¸—æµ-ç»“æ„è€¦åˆåˆ†ææ¼”ç¤ºï¼š

```bash
python examples/advanced/seepage_structure_coupling.py
```

è¯¥ç¤ºä¾‹ä¼šåˆ›å»ºä¸€ä¸ªç®€å•çš„æ·±åŸºå‘æ¨¡å‹å¹¶è¿›è¡Œè€¦åˆåˆ†æï¼Œç”Ÿæˆä½ç§»å’Œæ°´å‹åŠ›çš„æ—¶é—´å†ç¨‹æ›²çº¿ã€‚

### ç¤ºä¾‹ä»£ç 

```python
import os
import numpy as np
import matplotlib.pyplot as plt
from src.core.simulation.flow_structure_coupling import FlowStructureCoupling, CouplingType, CouplingScheme

# åˆ›å»ºå·¥ä½œç›®å½•
work_dir = os.path.join("examples", "case_results", "seepage_coupling")
os.makedirs(work_dir, exist_ok=True)

# åˆå§‹åŒ–è€¦åˆåˆ†ææ¨¡å‹
coupling_config = {
    "max_iterations": 15,
    "convergence_tolerance": 1e-4,
    "time_step": 2.0,
    "total_time": 50.0
}

coupling_analysis = FlowStructureCoupling(
    project_id=101,
    work_dir=work_dir,
    coupling_type=CouplingType.STAGGERED,
    coupling_scheme=CouplingScheme.BIOT,
    config=coupling_config
)

# åˆ›å»ºå’Œè®¾ç½®æµä½“æ¨¡å‹
# ...

# åˆ›å»ºå’Œè®¾ç½®ç»“æ„æ¨¡å‹
# ...

# åˆå§‹åŒ–åˆ†æ
if coupling_analysis.initialize():
    print("åˆå§‹åŒ–å®Œæˆï¼Œå¼€å§‹åˆ†æ...")
    
    # è¿è¡Œå®Œæ•´åˆ†æ
    if coupling_analysis.solve_complete():
        print("åˆ†æå®Œæˆ")
        
        # ä¿å­˜ç»“æœ
        result_file = coupling_analysis.save_results("final_results")
        print(f"ç»“æœå·²ä¿å­˜è‡³: {result_file}")
        
        # ç»˜åˆ¶ç»“æœ
        # ...
    else:
        print("åˆ†æå¤±è´¥")
else:
    print("åˆå§‹åŒ–å¤±è´¥")
```

## å…¸å‹åº”ç”¨åœºæ™¯

1. **æ·±åŸºå‘é™æ°´å½±å“åˆ†æ**: è¯„ä¼°åŸºå‘é™æ°´å¯¹å‘¨è¾¹å»ºç­‘ç‰©çš„å½±å“
2. **æ°´åå’Œå ¤é˜²åˆ†æ**: ç ”ç©¶æ¸—æµå¯¹æ°´å·¥å»ºç­‘ç‰©ç¨³å®šæ€§çš„å½±å“
3. **åœ°ä¸‹æ°´ä½å˜åŒ–å½±å“**: é¢„æµ‹åœ°ä¸‹æ°´ä½å˜åŒ–å¯¼è‡´çš„åœ°é¢æ²‰é™
4. **éš§é“å·¥ç¨‹**: è¯„ä¼°åœ°ä¸‹æ°´æµåŠ¨å¯¹éš§é“å›´å²©å˜å½¢çš„å½±å“
5. **åœŸåå’Œè¾¹å¡æ¸—æµç¨³å®šæ€§**: åˆ†æé™é›¨å…¥æ¸—å¯¹è¾¹å¡ç¨³å®šæ€§çš„å½±å“

## ç‰©ç†AIç³»ç»Ÿé›†æˆ

æ¸—æµ-ç»“æ„è€¦åˆåˆ†æå·²ä¸ç‰©ç†AIç³»ç»Ÿå®ç°åˆæ­¥é›†æˆï¼Œæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š

1. **å‚æ•°åæ¼”**: åˆ©ç”¨ç›‘æµ‹æ•°æ®åæ¼”åœŸä½“æ¸—é€ç³»æ•°å’Œå˜å½¢å‚æ•°
2. **è¾¹ç•Œæ¡ä»¶è¯†åˆ«**: è¯†åˆ«å®é™…æ°´å¤´å’ŒåŠ›è¾¹ç•Œæ¡ä»¶
3. **çŠ¶æ€é¢„æµ‹**: é¢„æµ‹æœªæ¥æ—¶é—´ç‚¹çš„å­”å‹åˆ†å¸ƒå’Œå˜å½¢åœº

ç‰©ç†AIé›†æˆç¤ºä¾‹ï¼š

```python
from src.ai.physics_ai import CoupledPINN
from src.core.simulation.flow_structure_coupling import FlowStructureCoupling

# åˆ›å»ºè€¦åˆPINNæ¨¡å‹å’ŒFEMè€¦åˆæ¨¡å‹
# ...

# è®¾ç½®æ•°æ®æ¥å£
# ...

# è¿è¡Œæ··åˆåˆ†æ
# ...
```

## ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’

1. **æ€§èƒ½ä¼˜åŒ–**: æ”¹è¿›ä¸€ä½“åŒ–æ±‚è§£å™¨æ€§èƒ½ï¼Œæ”¯æŒå¤§è§„æ¨¡é—®é¢˜
2. **é«˜çº§ç½‘æ ¼å¤„ç†**: å®Œå–„éåŒ¹é…ç½‘æ ¼çš„æ’å€¼ä¼ é€’ç®—æ³•
3. **è‡ªåŠ¨åŒ–å·¥ä½œæµ**: å¼€å‘å®Œæ•´çš„æ¸—æµ-ç»“æ„è€¦åˆåˆ†æå·¥ä½œæµ
4. **ä¸ç‰©ç†AIæ·±åº¦é›†æˆ**: å¢å¼ºä¸ç‰©ç†AIç³»ç»Ÿçš„é›†æˆèƒ½åŠ›
5. **ä¸é¥±å’ŒåœŸåˆ†æ**: æ‰©å±•æ”¯æŒä¸é¥±å’ŒåœŸçš„æ¸—æµ-ç»“æ„è€¦åˆåˆ†æ

## æ³¨æ„äº‹é¡¹

1. æ¸—æµ-ç»“æ„è€¦åˆåˆ†æé€šå¸¸æ¯”å•ç‹¬çš„ç»“æ„æˆ–æ¸—æµåˆ†æè®¡ç®—æˆæœ¬é«˜
2. å¯¹äºå¤§è§„æ¨¡æ¨¡å‹ï¼Œå»ºè®®å…ˆä½¿ç”¨è¾ƒç²—ç³™çš„ç½‘æ ¼è¿›è¡Œåˆæ­¥åˆ†æ
3. æ—¶é—´æ­¥é•¿é€‰æ‹©å¯¹åˆ†æç»“æœå’Œè®¡ç®—ç¨³å®šæ€§æœ‰é‡è¦å½±å“
4. è¾¹ç•Œæ¡ä»¶è®¾ç½®å¯¹è€¦åˆåˆ†æè‡³å…³é‡è¦ï¼Œç‰¹åˆ«æ˜¯æ°´åŠ›è¾¹ç•Œæ¡ä»¶
5. ä½¿ç”¨ä¸€ä½“åŒ–æ±‚è§£æ—¶ï¼Œæ”¶æ•›æ€§é€šå¸¸æ›´å¥½ä½†è®¡ç®—æˆæœ¬æ›´é«˜ï¼›åˆ†ç¦»å¼æ±‚è§£è®¡ç®—æ•ˆç‡æ›´é«˜ï¼Œä½†å¯èƒ½éœ€è¦æ›´å°çš„æ—¶é—´æ­¥é•¿

## å‚è€ƒæ–‡çŒ®

1. Lewis, R. W., & Schrefler, B. A. (1998). The finite element method in the static and dynamic deformation and consolidation of porous media. John Wiley.
2. Zienkiewicz, O. C., Chan, A. H. C., Pastor, M., Schrefler, B. A., & Shiomi, T. (1999). Computational geomechanics. Wiley.
3. Wang, H. F. (2000). Theory of linear poroelasticity with applications to geomechanics and hydrogeology. Princeton University Press.
4. Borja, R. I. (2004). Cam-Clay plasticity. Part V: A mathematical framework for three-phase deformation and strain localization analyses of partially saturated porous media. Computer methods in applied mechanics and engineering, 193(48-51), 5301-5338.
5. White, J. A., & Borja, R. I. (2008). Stabilized low-order finite elements for coupled solid-deformation/fluid-diffusion and their application to fault zone transients. Computer Methods in Applied Mechanics and Engineering, 197(49-50), 4353-4366. 
# ğŸ¯ 3Dè§†å£å·¥å…·æ å¸ƒå±€è®¾è®¡æ–¹æ¡ˆ

**ä¸º0å·æ¶æ„å¸ˆæä¾›çš„3Dè§†å£UIå¸ƒå±€æŠ€æœ¯æ–‡æ¡£**

## ğŸ“‹ ç°æœ‰å·¥å…·æ ç»„ä»¶æ¸…å•

### ğŸ”§ å·²å‘ç°çš„å·¥å…·æ ç»„ä»¶

#### 1. **ç»Ÿä¸€å·¥å…·æ  (UnifiedToolbar)**
- **æ–‡ä»¶**: `E:\DeepCAD\frontend\src\components\layout\UnifiedToolbar.tsx`
- **å¸ƒå±€**: æ°´å¹³å·¥å…·æ 
- **ä¸»è¦åŠŸèƒ½**:
  - è§†å›¾æ§åˆ¶: æ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾ã€é‡ç½®è§†å›¾
  - é€‰æ‹©å·¥å…·: å•é€‰ã€æ¡†é€‰ã€å¤šé€‰
  - æµ‹é‡å·¥å…·: è·ç¦»æµ‹é‡ã€è§’åº¦æµ‹é‡
  - æ ‡æ³¨å·¥å…·: æ–‡æœ¬æ ‡æ³¨ã€å°ºå¯¸æ ‡æ³¨
  - é«˜çº§å·¥å…·: å‰–åˆ‡ã€çˆ†ç‚¸è§†å›¾ã€çº¿æ¡†æ¨¡å¼
  - å‡ ä½•å·¥å…·: ç«‹æ–¹ä½“ã€åœ†æŸ±ä½“ã€çƒä½“åˆ›å»º
  - ç³»ç»Ÿå·¥å…·: æ’¤é”€ã€é‡åšã€ä¿å­˜ã€å¯¼å‡º

#### 2. **3Däº¤äº’å·¥å…·æ  (InteractionToolbar)**
- **æ–‡ä»¶**: `E:\DeepCAD\frontend\src\components\3d\tools\InteractionToolbar.tsx`
- **å¸ƒå±€**: å‚ç›´å·¥å…·æ 
- **ä¸“ä¸šåŠŸèƒ½**:
  - æµ‹é‡ç»“æœç®¡ç†ï¼ˆåˆ—è¡¨ã€æ˜¾ç¤º/éšè—ã€åˆ é™¤ï¼‰
  - æ ‡æ³¨ç®¡ç†ï¼ˆç¼–è¾‘ã€å¯è§æ€§æ§åˆ¶ï¼‰
  - çˆ†ç‚¸è§†å›¾æ»‘å—æ§åˆ¶
  - å·¥å…·ä½¿ç”¨æç¤ºå’Œå¸®åŠ©

#### 3. **ç«‹æ–¹ä½“å¯¼èˆªæ§ä»¶ (CubeViewNavigationControl)**
- **æ–‡ä»¶**: `E:\DeepCAD\frontend\src\components\3d\navigation\CubeViewNavigationControl.tsx`
- **å¸ƒå±€**: ç‹¬ç«‹3Dæ§ä»¶
- **åŠŸèƒ½**: 7ç§é¢„è®¾è§†è§’åˆ‡æ¢ï¼ˆå‰ã€åã€å·¦ã€å³ã€ä¸Šã€ä¸‹ã€ç­‰è½´æµ‹ï¼‰

#### 4. **CADä¸“ä¸šå·¥å…·æ  (CADToolbar)**
- **æ–‡ä»¶**: `E:\DeepCAD\frontend\src\components\geometry\CADToolbar.tsx`
- **å¸ƒå±€**: åˆ†ç»„å·¥å…·æ 
- **åŠŸèƒ½**:
  - åŸºç¡€å‡ ä½•: ç«‹æ–¹ä½“ã€åœ†æŸ±ä½“ã€çƒä½“ã€åœ†é”¥
  - å¸ƒå°”è¿ç®—: åˆå¹¶ã€åˆ‡å‰²ã€ç›¸äº¤ã€åˆ†å‰²
  - å˜æ¢æ“ä½œ: ç§»åŠ¨ã€æ—‹è½¬ã€å¤åˆ¶ã€é•œåƒã€ç¼©æ”¾

#### 5. **ç½‘æ ¼å·¥å…·æ  (MeshingVerticalToolbar)**
- **æ–‡ä»¶**: `E:\DeepCAD\frontend\src\components\meshing\MeshingVerticalToolbar.tsx`
- **å¸ƒå±€**: å‚ç›´ä¸“ç”¨å·¥å…·æ 
- **åŠŸèƒ½**: ç½‘æ ¼ç”Ÿæˆã€ç½‘æ ¼åˆ†æã€è´¨é‡æ£€æµ‹

## ğŸ¨ 3Dè§†å£å¸ƒå±€è®¾è®¡æ–¹æ¡ˆ

### å¸ƒå±€åŒºåŸŸåˆ’åˆ†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡¶éƒ¨ä¸»å·¥å…·æ  (Top Main Toolbar)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ L â”‚                                                     â”‚ R â”‚
â”‚ e â”‚                                                     â”‚ i â”‚  
â”‚ f â”‚               3D Viewport                           â”‚ g â”‚
â”‚ t â”‚             ä¸»è¦æ˜¾ç¤ºåŒºåŸŸ                              â”‚ h â”‚
â”‚   â”‚                                                     â”‚ t â”‚
â”‚ S â”‚                                                     â”‚   â”‚
â”‚ i â”‚                                                     â”‚ P â”‚
â”‚ d â”‚                                                     â”‚ a â”‚
â”‚ e â”‚                                                     â”‚ n â”‚
â”‚ b â”‚                                                     â”‚ e â”‚
â”‚ a â”‚                                                     â”‚ l â”‚
â”‚ r â”‚                                                     â”‚   â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¤
â”‚   â”‚              åº•éƒ¨çŠ¶æ€æ  (Bottom Status Bar)            â”‚   â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”˜
```

### è¯¦ç»†å¸ƒå±€è§„åˆ’

#### ğŸ” **é¡¶éƒ¨åŒºåŸŸ (Top Zone)**
**ä½ç½®**: 3Dè§†å£é¡¶éƒ¨ï¼Œå›ºå®šåœé 
**æ¨èç»„ä»¶**: UnifiedToolbar (ç»Ÿä¸€å·¥å…·æ )
**å¸ƒå±€ç‰¹æ€§**:
```css
.top-toolbar {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 48px;
  background: rgba(30, 30, 30, 0.95);
  backdrop-filter: blur(10px);
  z-index: 100;
}
```

**åŠŸèƒ½åˆ†ç»„**:
```jsx
<div className="top-toolbar">
  {/* æ–‡ä»¶æ“ä½œç»„ */}
  <div className="toolbar-group file-ops">
    <button title="æ–°å»º">ğŸ“„</button>
    <button title="æ‰“å¼€">ğŸ“</button>
    <button title="ä¿å­˜">ğŸ’¾</button>
    <button title="å¯¼å‡º">ğŸ“¤</button>
  </div>
  
  {/* ç¼–è¾‘æ“ä½œç»„ */}
  <div className="toolbar-group edit-ops">
    <button title="æ’¤é”€">â†¶</button>
    <button title="é‡åš">â†·</button>
    <button title="å¤åˆ¶">ğŸ“‹</button>
    <button title="ç²˜è´´">ğŸ“„</button>
  </div>
  
  {/* è§†å›¾æ§åˆ¶ç»„ */}
  <div className="toolbar-group view-ops">
    <button title="é€‚åˆçª—å£">ğŸ”</button>
    <button title="é‡ç½®è§†å›¾">ğŸ </button>
    <button title="çº¿æ¡†æ¨¡å¼">ğŸ“</button>
    <button title="å®ä½“æ¨¡å¼">ğŸ”³</button>
  </div>
  
  {/* é€‰æ‹©å·¥å…·ç»„ */}
  <div className="toolbar-group select-ops">
    <button title="å•é€‰">ğŸ‘†</button>
    <button title="æ¡†é€‰">â–¢</button>
    <button title="å¥—ç´¢é€‰æ‹©">ğŸ•¸ï¸</button>
  </div>
  
  {/* æµ‹é‡å·¥å…·ç»„ */}
  <div className="toolbar-group measure-ops">
    <button title="è·ç¦»æµ‹é‡">ğŸ“</button>
    <button title="è§’åº¦æµ‹é‡">ğŸ“</button>
    <button title="é¢ç§¯æµ‹é‡">ğŸ“</button>
  </div>
</div>
```

#### â—€ï¸ **å·¦ä¾§åŒºåŸŸ (Left Zone)**
**ä½ç½®**: 3Dè§†å£å·¦ä¾§ï¼Œå¯æŠ˜å 
**æ¨èç»„ä»¶**: æ¨¡å—åŒ–å‚ç›´å·¥å…·æ 
**å¸ƒå±€ç‰¹æ€§**:
```css
.left-sidebar {
  position: absolute;
  left: 0;
  top: 48px; /* é¡¶éƒ¨å·¥å…·æ é«˜åº¦ */
  bottom: 24px; /* åº•éƒ¨çŠ¶æ€æ é«˜åº¦ */
  width: 280px;
  background: rgba(20, 20, 20, 0.92);
  backdrop-filter: blur(8px);
  transform: translateX(-240px); /* é»˜è®¤æŠ˜å  */
  transition: transform 0.3s ease;
  z-index: 90;
}

.left-sidebar:hover,
.left-sidebar.expanded {
  transform: translateX(0);
}
```

**åŠŸèƒ½æ¨¡å—**:
```jsx
<div className="left-sidebar">
  {/* æŠ˜å /å±•å¼€æŒ‰é’® */}
  <div className="sidebar-toggle">
    <button title="å±•å¼€å·¥å…·é¢æ¿">â–¶ï¸</button>
  </div>
  
  {/* å‡ ä½•å»ºæ¨¡å·¥å…· */}
  <div className="tool-section geometry-tools">
    <h3>ğŸ”§ å‡ ä½•å»ºæ¨¡</h3>
    <div className="tool-grid">
      <button title="ç«‹æ–¹ä½“">ğŸ”³</button>
      <button title="åœ†æŸ±ä½“">ğŸ”˜</button>
      <button title="çƒä½“">âšª</button>
      <button title="åœ†é”¥">ğŸ”º</button>
    </div>
    
    <h4>å¸ƒå°”è¿ç®—</h4>
    <div className="tool-grid">
      <button title="åˆå¹¶">âŠ•</button>
      <button title="åˆ‡å‰²">âŠ–</button>
      <button title="ç›¸äº¤">âŠ—</button>
      <button title="åˆ†å‰²">âŠ˜</button>
    </div>
  </div>
  
  {/* ç½‘æ ¼å·¥å…· */}
  <div className="tool-section meshing-tools">
    <h3>ğŸ”¬ ç½‘æ ¼åˆ†æ</h3>
    <button className="tool-button">ç”Ÿæˆç½‘æ ¼</button>
    <button className="tool-button">è´¨é‡æ£€æµ‹</button>
    <button className="tool-button">ç½‘æ ¼ä¼˜åŒ–</button>
  </div>
  
  {/* è®¡ç®—å·¥å…· */}
  <div className="tool-section computation-tools">
    <h3>âš¡ è®¡ç®—åˆ†æ</h3>
    <button className="tool-button">æ·±åŸºå‘åˆ†æ</button>
    <button className="tool-button">åœŸç»“è€¦åˆ</button>
    <button className="tool-button">æ–½å·¥é˜¶æ®µ</button>
  </div>
</div>
```

#### â–¶ï¸ **å³ä¾§åŒºåŸŸ (Right Zone)**
**ä½ç½®**: 3Dè§†å£å³ä¾§ï¼Œæ™ºèƒ½æ˜¾ç¤º
**æ¨èç»„ä»¶**: InteractionToolbar + å±æ€§é¢æ¿
**å¸ƒå±€ç‰¹æ€§**:
```css
.right-panel {
  position: absolute;
  right: 0;
  top: 48px;
  bottom: 24px;
  width: 320px;
  background: rgba(25, 25, 25, 0.95);
  backdrop-filter: blur(12px);
  transform: translateX(320px); /* æŒ‰éœ€æ˜¾ç¤º */
  transition: transform 0.3s ease;
  z-index: 85;
}

.right-panel.active {
  transform: translateX(0);
}
```

**æ™ºèƒ½å†…å®¹é¢æ¿**:
```jsx
<div className="right-panel">
  {/* å·¥å…·äº¤äº’é¢æ¿ */}
  <div className="interaction-panel">
    <h3>ğŸ¯ å½“å‰å·¥å…·: è·ç¦»æµ‹é‡</h3>
    
    {/* æµ‹é‡ç»“æœåˆ—è¡¨ */}
    <div className="measurement-results">
      <h4>ğŸ“ æµ‹é‡ç»“æœ</h4>
      <div className="measurement-item">
        <span>è·ç¦»1: 125.6mm</span>
        <button title="åˆ é™¤">ğŸ—‘ï¸</button>
      </div>
      <div className="measurement-item">
        <span>è§’åº¦1: 45.2Â°</span>
        <button title="åˆ é™¤">ğŸ—‘ï¸</button>
      </div>
    </div>
    
    {/* çˆ†ç‚¸è§†å›¾æ§åˆ¶ */}
    <div className="explode-control">
      <h4>ğŸ’¥ çˆ†ç‚¸è§†å›¾</h4>
      <input type="range" min="0" max="100" className="explode-slider" />
      <span>åˆ†ç¦»åº¦: 50%</span>
    </div>
    
    {/* å‰–åˆ‡æ§åˆ¶ */}
    <div className="section-control">
      <h4>âœ‚ï¸ å‰–åˆ‡è§†å›¾</h4>
      <button className="tool-button">æ·»åŠ å‰–åˆ‡é¢</button>
      <button className="tool-button">ç§»é™¤å‰–åˆ‡</button>
    </div>
  </div>
  
  {/* å±æ€§é¢æ¿ */}
  <div className="properties-panel">
    <h3>âš™ï¸ å¯¹è±¡å±æ€§</h3>
    <div className="property-group">
      <label>ææ–™:</label>
      <select>
        <option>æ··å‡åœŸ</option>
        <option>é’¢æ</option>
        <option>åœŸä½“</option>
      </select>
    </div>
    <div className="property-group">
      <label>å°ºå¯¸:</label>
      <input type="number" placeholder="é•¿åº¦" />
      <input type="number" placeholder="å®½åº¦" />
      <input type="number" placeholder="é«˜åº¦" />
    </div>
  </div>
</div>
```

#### ğŸ¯ **å³ä¸Šè§’å›ºå®šåŒºåŸŸ (Top-Right Fixed)**
**ä½ç½®**: 3Dè§†å£å³ä¸Šè§’
**æ¨èç»„ä»¶**: CubeViewNavigationControl (ç«‹æ–¹ä½“å¯¼èˆª)
**å¸ƒå±€ç‰¹æ€§**:
```css
.view-navigation-cube {
  position: absolute;
  top: 60px; /* é¿å¼€é¡¶éƒ¨å·¥å…·æ  */
  right: 20px;
  width: 100px;
  height: 100px;
  z-index: 110;
}
```

**3Då¯¼èˆªç«‹æ–¹ä½“**:
```jsx
<div className="view-navigation-cube">
  <CubeViewNavigationControl 
    onViewChange={(view) => handleViewChange(view)}
    currentView="isometric"
    showLabels={true}
    enableAnimation={true}
  />
</div>
```

#### ğŸ”„ **å³ä¸‹è§’æµ®åŠ¨åŒºåŸŸ (Bottom-Right Float)**
**ä½ç½®**: 3Dè§†å£å³ä¸‹è§’
**æ¨èç»„ä»¶**: å¿«é€Ÿæ“ä½œå·¥å…·
**å¸ƒå±€ç‰¹æ€§**:
```css
.quick-actions {
  position: absolute;
  bottom: 40px;
  right: 20px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  z-index: 105;
}
```

**å¿«é€Ÿæ“ä½œæŒ‰é’®**:
```jsx
<div className="quick-actions">
  <button className="quick-btn" title="å…¨å±">ğŸ”</button>
  <button className="quick-btn" title="æˆªå›¾">ğŸ“·</button>
  <button className="quick-btn" title="å½•åƒ">ğŸ¥</button>
  <button className="quick-btn" title="è®¾ç½®">âš™ï¸</button>
</div>
```

#### ğŸ”½ **åº•éƒ¨çŠ¶æ€æ  (Bottom Status Bar)**
**ä½ç½®**: 3Dè§†å£åº•éƒ¨
**åŠŸèƒ½**: çŠ¶æ€æ˜¾ç¤ºå’Œå¿«é€Ÿä¿¡æ¯
**å¸ƒå±€ç‰¹æ€§**:
```css
.bottom-status-bar {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 24px;
  background: rgba(15, 15, 15, 0.98);
  backdrop-filter: blur(6px);
  z-index: 95;
}
```

**çŠ¶æ€ä¿¡æ¯æ˜¾ç¤º**:
```jsx
<div className="bottom-status-bar">
  <span className="status-item">åæ ‡: X:125.6 Y:78.2 Z:45.1</span>
  <span className="status-item">é€‰ä¸­: 3ä¸ªå¯¹è±¡</span>
  <span className="status-item">æ¸²æŸ“: 60 FPS</span>
  <span className="status-item">å†…å­˜: 2.1GB / 8GB</span>
  <span className="status-item">å·¥å…·: è·ç¦»æµ‹é‡</span>
</div>
```

## ğŸ¨ äº¤äº’å¼å·¥å…·å¸ƒå±€ç­–ç•¥

### æ™ºèƒ½æ˜¾ç¤ºé€»è¾‘

#### 1. **ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ˜¾ç¤º**
```typescript
interface ToolbarDisplayLogic {
  // æ ¹æ®å½“å‰æ¨¡å¼æ˜¾ç¤ºç›¸åº”å·¥å…·
  displayMode: 'geometry' | 'meshing' | 'analysis' | 'results';
  
  // å·¥å…·æ è‡ªåŠ¨åˆ‡æ¢
  autoSwitchToolbar: (mode: string) => {
    switch(mode) {
      case 'geometry':
        showLeftPanel('geometry-tools');
        showRightPanel('properties');
        break;
      case 'meshing':
        showLeftPanel('meshing-tools');
        showRightPanel('mesh-quality');
        break;
      case 'analysis':
        showLeftPanel('computation-tools');
        showRightPanel('analysis-settings');
        break;
      case 'results':
        showLeftPanel('visualization-tools');
        showRightPanel('results-data');
        break;
    }
  };
}
```

#### 2. **å“åº”å¼å¸ƒå±€é€‚é…**
```css
/* å¤§å±å¹• (>1400px) */
@media (min-width: 1400px) {
  .left-sidebar { width: 320px; }
  .right-panel { width: 360px; }
  .view-navigation-cube { width: 120px; height: 120px; }
}

/* ä¸­å±å¹• (1024px-1400px) */
@media (min-width: 1024px) and (max-width: 1400px) {
  .left-sidebar { width: 280px; }
  .right-panel { width: 320px; }
  .view-navigation-cube { width: 100px; height: 100px; }
}

/* å°å±å¹• (<1024px) */
@media (max-width: 1024px) {
  .left-sidebar, .right-panel {
    width: 100%;
    height: 50%;
    transform: translateY(100%);
  }
  
  .top-toolbar {
    height: 40px;
    font-size: 14px;
  }
  
  .view-navigation-cube {
    width: 80px;
    height: 80px;
  }
}
```

#### 3. **åŠ¨æ€å·¥å…·ç»„åˆ**
```typescript
class DynamicToolbarManager {
  // æ ¹æ®é€‰ä¸­å¯¹è±¡åŠ¨æ€æ˜¾ç¤ºå·¥å…·
  updateToolsForSelection(selectedObjects: Object3D[]) {
    if (selectedObjects.length === 0) {
      this.showDefaultTools();
    } else if (selectedObjects.length === 1) {
      this.showSingleObjectTools(selectedObjects[0]);
    } else {
      this.showMultiObjectTools(selectedObjects);
    }
  }
  
  // æ ¹æ®å½“å‰æ“ä½œæ˜¾ç¤ºç›¸å…³å·¥å…·
  updateToolsForOperation(operation: string) {
    const toolMappings = {
      'measurement': ['distance', 'angle', 'area', 'results-panel'],
      'annotation': ['text', 'dimension', 'leader', 'properties'],
      'sectioning': ['plane', 'box', 'sphere', 'preview'],
      'explode': ['slider', 'reset', 'animate', 'capture']
    };
    
    this.showSpecificTools(toolMappings[operation]);
  }
}
```

### å¿«æ·é”®é›†æˆæ–¹æ¡ˆ

```typescript
const keyboardShortcuts = {
  // è§†å›¾æ§åˆ¶
  'F': 'fit-to-window',        // é€‚åˆçª—å£
  'H': 'reset-view',           // é‡ç½®è§†å›¾
  'W': 'wireframe-toggle',     // çº¿æ¡†åˆ‡æ¢
  'S': 'shaded-toggle',        // å®ä½“åˆ‡æ¢
  
  // å·¥å…·åˆ‡æ¢
  'Q': 'select-tool',          // é€‰æ‹©å·¥å…·
  'M': 'measure-tool',         // æµ‹é‡å·¥å…·
  'A': 'annotation-tool',      // æ ‡æ³¨å·¥å…·
  'X': 'section-tool',         // å‰–åˆ‡å·¥å…·
  
  // é¢æ¿æ§åˆ¶
  'Ctrl+1': 'toggle-left-panel',   // åˆ‡æ¢å·¦é¢æ¿
  'Ctrl+2': 'toggle-right-panel',  // åˆ‡æ¢å³é¢æ¿
  'Ctrl+3': 'toggle-properties',   // åˆ‡æ¢å±æ€§é¢æ¿
  
  // è§†è§’åˆ‡æ¢
  '1': 'front-view',           // å‰è§†å›¾
  '2': 'back-view',            // åè§†å›¾
  '3': 'right-view',           // å³è§†å›¾
  '4': 'left-view',            // å·¦è§†å›¾
  '5': 'top-view',             // ä¿¯è§†å›¾
  '6': 'bottom-view',          // ä»°è§†å›¾
  '7': 'isometric-view',       // ç­‰è½´æµ‹è§†å›¾
};
```

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…ç­–ç•¥

### è§¦æ§ä¼˜åŒ–å¸ƒå±€
```jsx
const MobileViewportLayout = () => (
  <div className="mobile-viewport">
    {/* é¡¶éƒ¨ç®€åŒ–å·¥å…·æ  */}
    <div className="mobile-top-bar">
      <button className="menu-toggle">â˜°</button>
      <span className="title">DeepCAD</span>
      <button className="view-toggle">ğŸ‘ï¸</button>
    </div>
    
    {/* 3Dè§†å£ */}
    <div className="mobile-3d-viewport">
      {/* æµ®åŠ¨å¯¼èˆªçƒ */}
      <div className="floating-nav-ball">
        <button>ğŸ§­</button>
      </div>
      
      {/* åº•éƒ¨å·¥å…·æŠ½å±‰ */}
      <div className="bottom-drawer">
        <div className="drawer-handle"></div>
        <div className="drawer-content">
          {/* å¸¸ç”¨å·¥å…· */}
        </div>
      </div>
    </div>
  </div>
);
```

## ğŸ”Œ é›†æˆå®ç°ä»£ç 

### ä¸»å¸ƒå±€å®¹å™¨ç»„ä»¶
```typescript
interface Viewport3DLayoutProps {
  scene: THREE.Scene;
  currentMode: 'geometry' | 'meshing' | 'analysis' | 'results';
  onModeChange: (mode: string) => void;
  enableResponsive?: boolean;
  customToolbarConfig?: ToolbarConfig;
}

const Viewport3DLayout: React.FC<Viewport3DLayoutProps> = ({
  scene,
  currentMode,
  onModeChange,
  enableResponsive = true,
  customToolbarConfig
}) => {
  const [leftPanelVisible, setLeftPanelVisible] = useState(false);
  const [rightPanelVisible, setRightPanelVisible] = useState(false);
  const [selectedTool, setSelectedTool] = useState<string>('select');
  
  return (
    <div className="viewport-3d-layout">
      {/* é¡¶éƒ¨ä¸»å·¥å…·æ  */}
      <UnifiedToolbar 
        className="top-toolbar"
        onToolSelect={setSelectedTool}
        selectedTool={selectedTool}
        currentMode={currentMode}
      />
      
      {/* å·¦ä¾§å·¥å…·é¢æ¿ */}
      <div className={`left-sidebar ${leftPanelVisible ? 'expanded' : ''}`}>
        <button 
          className="sidebar-toggle"
          onClick={() => setLeftPanelVisible(!leftPanelVisible)}
        >
          {leftPanelVisible ? 'â—€' : 'â–¶'}
        </button>
        
        {/* æ ¹æ®æ¨¡å¼æ˜¾ç¤ºä¸åŒå·¥å…·æ  */}
        {currentMode === 'geometry' && <CADToolbar />}
        {currentMode === 'meshing' && <MeshingVerticalToolbar />}
        {currentMode === 'analysis' && <ComputationControlPanel />}
      </div>
      
      {/* ä¸»3Dè§†å£ */}
      <div className="main-3d-viewport">
        <Canvas scene={scene} />
        
        {/* å³ä¸Šè§’å¯¼èˆªç«‹æ–¹ä½“ */}
        <div className="view-navigation-cube">
          <CubeViewNavigationControl 
            onViewChange={(view) => console.log('è§†å›¾åˆ‡æ¢:', view)}
          />
        </div>
        
        {/* å³ä¸‹è§’å¿«é€Ÿæ“ä½œ */}
        <div className="quick-actions">
          <button title="å…¨å±">ğŸ”</button>
          <button title="æˆªå›¾">ğŸ“·</button>
          <button title="è®¾ç½®">âš™ï¸</button>
        </div>
      </div>
      
      {/* å³ä¾§äº¤äº’é¢æ¿ */}
      <div className={`right-panel ${rightPanelVisible ? 'active' : ''}`}>
        <InteractionToolbar 
          selectedTool={selectedTool}
          onPanelToggle={setRightPanelVisible}
        />
      </div>
      
      {/* åº•éƒ¨çŠ¶æ€æ  */}
      <div className="bottom-status-bar">
        <StatusBar currentMode={currentMode} selectedTool={selectedTool} />
      </div>
    </div>
  );
};

export default Viewport3DLayout;
```

### å·¥å…·æ çŠ¶æ€ç®¡ç†
```typescript
// é›†æˆç°æœ‰çš„çŠ¶æ€ç®¡ç†ç³»ç»Ÿ
const useViewportLayout = () => {
  const viewportStore = useViewportStore();
  const toolbarState = useUnifiedToolbar();
  
  const showPanel = (panel: 'left' | 'right', content?: string) => {
    viewportStore.setToolbarConfig({
      ...viewportStore.toolbarConfig,
      [`${panel}PanelVisible`]: true,
      [`${panel}PanelContent`]: content
    });
  };
  
  const hidePanel = (panel: 'left' | 'right') => {
    viewportStore.setToolbarConfig({
      ...viewportStore.toolbarConfig,
      [`${panel}PanelVisible`]: false
    });
  };
  
  return {
    showPanel,
    hidePanel,
    toolbarState,
    viewportConfig: viewportStore.viewportConfig
  };
};
```

## ğŸ“‹ å®æ–½å»ºè®®

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€å¸ƒå±€
1. âœ… å®ç°ä¸»å¸ƒå±€å®¹å™¨ç»„ä»¶
2. âœ… é›†æˆç°æœ‰UnifiedToolbaråˆ°é¡¶éƒ¨
3. âœ… è®¾ç½®å·¦å³é¢æ¿åŸºæœ¬æ¡†æ¶
4. âœ… é›†æˆCubeViewNavigationControlåˆ°å³ä¸Šè§’

### ç¬¬äºŒé˜¶æ®µï¼šå·¥å…·é›†æˆ
1. âœ… å°†ç°æœ‰å‚ç›´å·¥å…·æ é›†æˆåˆ°å·¦é¢æ¿
2. âœ… å°†InteractionToolbaré›†æˆåˆ°å³é¢æ¿
3. âœ… å®ç°å·¥å…·æ çš„æ™ºèƒ½æ˜¾ç¤º/éšè—é€»è¾‘
4. âœ… æ·»åŠ å¿«æ·é”®æ”¯æŒ

### ç¬¬ä¸‰é˜¶æ®µï¼šäº¤äº’ä¼˜åŒ–
1. âœ… å®ç°å“åº”å¼å¸ƒå±€é€‚é…
2. âœ… æ·»åŠ åŠ¨ç”»è¿‡æ¸¡æ•ˆæœ
3. âœ… ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ
4. âœ… æ€§èƒ½ä¼˜åŒ–å’Œæµ‹è¯•

### ç¬¬å››é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½
1. âœ… å®ç°ä¸Šä¸‹æ–‡æ„ŸçŸ¥å·¥å…·åˆ‡æ¢
2. âœ… æ·»åŠ è‡ªå®šä¹‰å·¥å…·æ é…ç½®
3. âœ… é›†æˆä¸»é¢˜ç³»ç»Ÿ
4. âœ… æ·»åŠ å·¥å…·ä½¿ç”¨ç»Ÿè®¡å’Œä¼˜åŒ–

## ğŸ¯ å…³é”®ä¼˜åŠ¿

### ğŸš€ **æ€§èƒ½ä¼˜åŠ¿**
- **æ¨¡å—åŒ–åŠ è½½**: æŒ‰éœ€åŠ è½½å·¥å…·æ ç»„ä»¶
- **GPUä¼˜åŒ–**: æ‰€æœ‰åŠ¨ç”»ä½¿ç”¨GPUåŠ é€Ÿ
- **å†…å­˜ç®¡ç†**: æ™ºèƒ½å·¥å…·æ å†…å®¹ç¼“å­˜

### ğŸ¨ **ç”¨æˆ·ä½“éªŒä¼˜åŠ¿**
- **ç›´è§‚å¸ƒå±€**: ç¬¦åˆCADè½¯ä»¶ä½¿ç”¨ä¹ æƒ¯
- **æ™ºèƒ½é€‚é…**: è‡ªåŠ¨è°ƒæ•´å·¥å…·æ å†…å®¹
- **å¿«æ·æ“ä½œ**: ä¸°å¯Œçš„å¿«æ·é”®æ”¯æŒ

### ğŸ”§ **å¼€å‘ä¼˜åŠ¿**
- **ç»„ä»¶å¤ç”¨**: æœ€å¤§åŒ–åˆ©ç”¨ç°æœ‰ç»„ä»¶
- **æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°å·¥å…·å’ŒåŠŸèƒ½
- **ç»´æŠ¤æ€§**: æ¸…æ™°çš„ç»„ä»¶ç»“æ„å’ŒçŠ¶æ€ç®¡ç†

---

**ğŸ¯ 3å·è®¡ç®—ä¸“å®¶**  
*åŸºäºç°æœ‰ä¼˜ç§€ç»„ä»¶ï¼Œä¸º0å·æ¶æ„å¸ˆæä¾›æœ€ä½³çš„3Dè§†å£å¸ƒå±€æ–¹æ¡ˆï¼*

**æ–‡ä»¶ä½ç½®**: `E:\DeepCAD\3D_VIEWPORT_TOOLBAR_LAYOUT_DESIGN.md`